import{aa as p,k as f,j as r,bj as g,bv as b,bb as v,o as h,F as S,bw as k,bx as w,ap as x,by as C,bz as E,l as R,a$ as u}from"./vendor-4c8effbd.js";import{f as y,e as _,I as m}from"./index-efdad191.js";const M=({email:e})=>{const{data:a}=_(),[c,{isLoading:t}]=y(),{enqueueSnackbar:n}=p(),{t:s}=f(),[l,o]=v.useState(!1);return h(S,{children:[r(g,{position:"end",children:r(m,{"aria-label":"send email code",onClick:()=>o(!0),edge:"end",color:"secondary",disabled:t,children:r(b,{})})}),h(k,{open:l,onClose:()=>o(!1),children:[r(w,{children:r(x,{i18nKey:"auth.captcha.title",children:"Captcha"})}),r(C,{children:r(E,{sitekey:a==null?void 0:a.recaptcha_site_key,onChange:i=>{if(R.isNull(i)){n(s("auth.captcha.error_null_token"),{variant:"error"});return}c({email:e,recaptcha_data:i}).unwrap().then(()=>{n(s("auth.captcha.success"),{variant:"success"}),u.event("send_email_verify",{category:"auth",label:"send_email_verify",email:e,success:!0})}).catch(d=>{console.error(d),n(s("auth.captcha.error"),{variant:"error"}),u.event("send_email_verify",{category:"auth",label:"send_email_verify",email:e,success:!1,error:d})}).finally(()=>{o(!1)})}})})]})]})},D=({email:e})=>{const[a,{isLoading:c}]=y(),{data:t}=_(),{enqueueSnackbar:n}=p(),{t:s}=f(),l=()=>{console.log("send email code"),a({email:e}).unwrap().then(()=>{n(s("auth.captcha.success"),{variant:"success"})}).catch(o=>{console.error(o),n(s("auth.captcha.error"),{variant:"error"})})};return(t==null?void 0:t.is_recaptcha)===1?r(M,{email:e}):r(g,{position:"end",children:r(m,{"aria-label":"send email code",onClick:l,edge:"end",color:"secondary",disabled:c,children:r(b,{})})})},j=e=>new RegExp(/[0-9]/).test(e),G=e=>new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e),I=e=>new RegExp(/[!#@$%^&*)(+=._-]/).test(e),N=e=>e<2?{label:"Poor",color:"error.main"}:e<3?{label:"Weak",color:"warning.main"}:e<4?{label:"Normal",color:"warning.dark"}:e<5?{label:"Good",color:"success.main"}:e<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"},T=e=>{let a=0;return e.length>5&&(a+=1),e.length>7&&(a+=1),j(e)&&(a+=1),I(e)&&(a+=1),G(e)&&(a+=1),a};export{D as S,N as a,T as s};
