System.register(["./vendor-legacy-a194f484.js","./index-legacy-3a6f8cc6.js","./DataGrid-legacy-cdb9310e.js","./order-legacy-457a0b92.js"],(function(t,e){"use strict";var r,a,o,n,i,l,s,d,c,u,g,p,m,h,b,S,v,x,w;return{setters:[t=>{r=t.j,a=t.k,o=t.a9,n=t.ba,i=t.r,l=t.aH,s=t.m,d=t.as,c=t.aw,u=t.aj,g=t.bg,p=t.cf},t=>{m=t.M,h=t.t,b=t.v,S=t.m,v=t.b},t=>{x=t.D},t=>{w=t.O}],execute:function(){const e=({children:t,className:e})=>r(m,{className:e,content:!1,children:t}),f=()=>{const{t:t}=a(),{data:e,isLoading:m}=h(void 0,{pollingInterval:6e4}),[S,{isLoading:v}]=b(),{enqueueSnackbar:f}=o(),[N,y]=n.useState(10),_=i.useMemo((()=>[{field:"trade_no",headerName:t("order.list.table.trade_no",{context:"header"}).toString(),description:t("order.list.table.trade_no",{context:"description"}).toString(),width:240,type:"string",renderCell:t=>r(l,{component:s,to:`/order/${t.value}`,underline:"none",children:t.value}),sortComparator:(t,e)=>parseInt(t)-parseInt(e)},{field:"plan.name",headerName:t("order.list.table.plan_name",{context:"header"}).toString(),description:t("order.list.table.plan_name",{context:"description"}).toString(),width:180,type:"string",valueGetter:t=>t.row.plan.name},{field:"total_amount",headerName:t("order.list.table.total_amount",{context:"header"}).toString(),description:t("order.list.table.total_amount",{context:"description"}).toString(),width:180,type:"number",valueGetter:t=>t.row.total_amount/100,valueFormatter:t=>`${t.value.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`},{field:"period",sortable:!1,headerName:t("order.list.table.period",{context:"header"}).toString(),description:t("order.list.table.period",{context:"description"}).toString(),width:120,type:"string",valueFormatter:e=>t("order.list.table.period-value",{context:e.value}).toString()},{field:"status",headerName:t("order.list.table.status",{context:"header"}).toString(),description:t("order.list.table.status",{context:"description"}).toString(),width:120,type:"string",sortable:!1,valueFormatter:e=>{switch(e.value){case w.PENDING:return t("order.list.table.status-value",{context:"pending"}).toString();case w.PAID:return t("order.list.table.status-value",{context:"paid"}).toString();case w.CANCELLED:return t("order.list.table.status-value",{context:"cancelled"}).toString();case w.FINISHED:return t("order.list.table.status-value",{context:"finished"}).toString();case w.DEDUCTED:return t("order.list.table.status-value",{context:"deducted"}).toString();default:return e.value}}},{field:"created_at",headerName:t("order.list.table.created_at",{context:"header"}).toString(),description:t("order.list.table.created_at",{context:"description"}).toString(),width:180,type:"dateTime",valueGetter:t=>d.unix(t.row.created_at).toDate(),valueFormatter:t=>d(t.value).format("DD-MM-YYYY HH:mm:ss")},{field:"actions",headerName:t("order.list.table.action",{context:"header"}).toString(),width:120,sortable:!1,type:"actions",getActions:e=>[r(c,{title:t("order.list.table.action-view",{context:"tooltip"}).toString(),children:r(u,{size:"small",component:s,to:`/order/${e.row.trade_no}`,children:r(g,{})})},e.id),...e.row.status===w.PENDING?[r(c,{title:t("order.list.table.action-cancel",{context:"tooltip"}).toString(),children:r(u,{size:"small",onClick:()=>{S(e.row.trade_no).unwrap().then((()=>{f(t("notice::order-cancel",{context:"success"}).toString(),{variant:"success"})})).catch((e=>{console.error("error cancelling order",e),f(t("notice::order-cancel",{context:"fail"}).toString(),{variant:"error"})}))},disabled:v,children:r(p,{})})},e.id)]:[]]}]),[e,t]);return r(x,{columns:_,rows:e??[],loading:m,getRowId:t=>t.trade_no,rowsPerPageOptions:[5,10,25,50],pageSize:N,onPageSizeChange:t=>y(t)})},N=S()((t=>({root:{flexGrow:1,height:"100%",display:"flex",flexDirection:"column"}}))),y=()=>{const{classes:t}=N();return r(e,{className:t.root,children:r(f,{})})};t("default",(()=>(v("order-list"),r(y,{}))))}}}));
