System.register(["./vendor-legacy-21e846b5.js","./AuthWrapper-legacy-e64f4946.js","./index-legacy-4d5357df.js","./AnimateButton-legacy-ef3d17cf.js","./password-strength-legacy-0a064d1d.js","./useQuery-legacy-84be3fc1.js"],(function(e,i){"use strict";var r,t,n,s,o,a,l,d,c,m,p,u,g,h,_,v,b,w,f,x,y,S,q,C,B,j,W,A,F,I,k,E,P,z,D,$,M,R,V,K,L,O,Q,T,G;return{setters:[e=>{r=e.i,t=e.bc,n=e.ab,s=e.k,o=e.aa,a=e.r,l=e.be,d=e.bf,c=e.bp,m=e.bq,p=e.j,u=e.F,g=e.bd,h=e.a$,_=e.l,v=e.B,b=e.o,w=e.aL,f=e.aj,x=e.bg,y=e.ap,S=e.bh,q=e.bi,C=e.br,B=e.bj,j=e.bk,W=e.bl,A=e.bs,F=e.T,I=e.bt,k=e.bu,E=e.aI,P=e.m,z=e.bm,D=e.aq},e=>{$=e.A},e=>{M=e.d,R=e.e,V=e.I,K=e.b},e=>{L=e.A},e=>{O=e.S,Q=e.s,T=e.a},e=>{G=e.u}],execute:function(){const i=()=>{const e=r(),i=t(),$=n(),{t:K}=s("common"),{enqueueSnackbar:H}=o(),J=G(),[N]=M(),{data:U}=R(),[X,Y]=a.useState(),[Z,ee]=a.useState(!1),ie=()=>{ee(!Z)},re=e=>{e.preventDefault()},te=e=>{const i=Q(e);Y(T(i))};a.useEffect((()=>{te("")}),[]);const ne=a.useMemo((()=>l().shape({email:d().email(K("register.email_invalid").toString()).max(255,K("register.email_max",{count:255}).toString()).required(K("register.email_required").toString()),password:d().min(8,K("register.password_min",{count:8}).toString()).max(255,K("register.password_max",{count:255}).toString()).required(K("register.password_required").toString()),password_confirm:d().oneOf([c("password"),null],K("register.password_confirm_invalid").toString()).required(K("register.password_confirm_required").toString()),invite_code:U?.is_invite_force?d().max(8,K("register.invite_code_max").toString()).required(K("register.invite_code_required").toString()):d().max(8,K("register.invite_code_max").toString()),email_code:U?.is_email_verify?m().max(6,K("register.email_code_max").toString()).required(K("register.email_code_required").toString()):m().negative()})),[K,U?.is_invite_force,U?.is_email_verify]);return p(u,{children:p(g,{initialValues:{email:"",password:"",password_confirm:"",invite_code:J.get("code")??"",email_code:"",agree:!1,submit:null},validationSchema:ne,onSubmit:async(e,{setErrors:r,setStatus:t,setSubmitting:n})=>{if(!e.agree)return t({success:!1}),r({submit:K("register.agree_required").toString()}),void n(!1);try{await N({email:e.email,password:e.password,invite_code:e.invite_code,email_code:U?.is_email_verify?e.email_code:""}).unwrap().then((()=>{t({success:!0}),H(K("notice::register_success"),{variant:"success"}),$("/dashboard",{replace:!0}),h.event("register",{category:"auth",label:"register",method:"email",success:!0,email:e.email,password_strength:X?.label,invite_code:e.invite_code})}),(i=>{t({success:!1}),r(_.isEmpty(i.errors)?{submit:i.message}:i.errors),h.event("register",{category:"auth",label:"register",method:"email",success:!1,error:i.message,email:e.email,values:e})}))}catch(s){i.current&&(t({success:!1}),r(_.isEmpty(s.errors)?{submit:s.message}:s.errors))}finally{n(!1)}},children:({errors:i,handleBlur:r,handleChange:t,handleSubmit:n,isSubmitting:s,touched:o,values:a,setValues:l})=>p(v,{component:"form",onSubmit:n,children:b(w,{container:!0,spacing:3,children:[p(w,{item:!0,xs:12,children:b(f,{spacing:1,children:[p(x,{htmlFor:"email",children:p(y,{children:"register.email"})}),p(S,{fullWidth:!0,error:Boolean(o.email&&i.email),id:"email",type:"email",value:a.email,name:"email",onBlur:r,onChange:t,placeholder:"user@example.com",inputProps:{},endAdornment:1===U?.is_email_verify?p(O,{email:a.email}):void 0}),o.email&&i.email&&p(q,{error:!0,id:"helper-text-email-signup",children:i.email})]})}),1===U?.is_email_verify&&p(u,{children:p(w,{item:!0,xs:12,children:b(f,{spacing:1,children:[p(x,{htmlFor:"email-code-signup",children:p(y,{children:"register.email_code"})}),p(C,{value:a.email_code,onChange:e=>{l((i=>({...i,email_code:e})))},numInputs:6,containerStyle:{justifyContent:"space-between"},inputStyle:{width:"100%",margin:"8px",padding:"10px",border:`1px solid ${"dark"===e.palette.mode?e.palette.grey[200]:e.palette.grey[300]}`,borderRadius:4,":hover":{borderColor:e.palette.primary.main}},focusStyle:{outline:"none",boxShadow:e.customShadows.primary,border:`1px solid ${e.palette.primary.main}`}}),o.email_code&&i.email_code&&p(q,{error:!0,id:"helper-text-email-signup",children:i.email_code})]})})}),b(w,{item:!0,xs:12,children:[b(f,{spacing:1,children:[p(x,{htmlFor:"password-signup",children:p(y,{children:"register.password"})}),p(S,{fullWidth:!0,error:Boolean(o.password&&i.password),id:"password-signup",type:Z?"text":"password",value:a.password,name:"password",onBlur:r,onChange:e=>{t(e),te(e.target.value)},autoComplete:"new-password",endAdornment:p(B,{position:"end",children:p(V,{"aria-label":"toggle password visibility",onClick:ie,onMouseDown:re,edge:"end",color:"secondary",children:p(Z?j:W,{})})}),placeholder:"******",inputProps:{}}),o.password&&i.password&&p(q,{error:!0,id:"helper-text-password-signup",children:i.password})]}),p(A,{fullWidth:!0,sx:{mt:2},children:b(w,{container:!0,spacing:2,alignItems:"center",children:[p(w,{item:!0,children:p(v,{sx:{bgcolor:X?.color,width:85,height:8,borderRadius:"7px"}})}),p(w,{item:!0,children:p(F,{variant:"subtitle1",fontSize:"0.75rem",children:K("register.password_strength",{context:_.lowerCase(X?.label)}).toString()})})]})})]}),p(w,{item:!0,xs:12,children:b(f,{spacing:1,children:[p(x,{htmlFor:"password-confirm",children:p(y,{children:"register.password_confirm"})}),p(S,{fullWidth:!0,error:Boolean(o.password_confirm&&i.password_confirm),id:"password-confirm",type:Z?"text":"password",value:a.password_confirm,name:"password_confirm",onBlur:r,onChange:e=>{t(e),te(e.target.value)},autoComplete:"new-password",placeholder:"******",inputProps:{}}),o.password_confirm&&i.password_confirm&&p(q,{error:!0,id:"helper-text-password-confirm",children:i.password_confirm})]})}),p(w,{item:!0,xs:12,children:b(f,{spacing:1,children:[p(x,{htmlFor:"invite-code-signup",required:1===U?.is_invite_force,children:p(y,{children:"register.invite_code"})}),p(S,{fullWidth:!0,error:Boolean(o.invite_code&&i.invite_code),id:"invite-code-signup",type:"text",value:a.invite_code,name:"invite_code",onBlur:r,onChange:t,required:1===U?.is_invite_force,placeholder:K("register.invite_code_placeholder",{context:1===U?.is_invite_force?"required":"optional"}).toString(),inputProps:{},disabled:null!==J.get("code")}),o.invite_code&&i.invite_code&&p(q,{error:!0,id:"helper-text-email-signup",children:i.invite_code})]})}),p(w,{item:!0,xs:12,children:p(I,{value:!1,control:p(k,{}),name:"agree",id:"agree",onBlur:r,onChange:t,"aria-required":!0,sx:{alignItems:"flex-start"},label:p(F,{variant:"body2",children:b(y,{i18nKey:"register.license_agree",children:[p(E,{id:"terms-of-service",variant:"subtitle2",component:P,to:"/terms-of-service"}),p(E,{id:"privacy-policy",variant:"subtitle2",component:P,to:"/privacy-policy"})]})})})}),i.submit&&p(w,{item:!0,xs:12,children:p(q,{error:!0,children:i.submit})}),p(w,{item:!0,xs:12,children:p(L,{children:p(z,{disableElevation:!0,disabled:s,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:s?p(D,{size:24,color:"inherit"}):p(y,{children:"register.submit"})})})})]})})})})};e("default",(()=>(K("register"),p($,{children:b(w,{container:!0,spacing:3,children:[p(w,{item:!0,xs:12,children:b(f,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[p(F,{variant:"h3",children:p(y,{children:"register.title"})}),p(F,{component:P,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:p(y,{children:"register.go-login"})})]})}),p(w,{item:!0,xs:12,children:p(i,{})})]})}))))}}}));
