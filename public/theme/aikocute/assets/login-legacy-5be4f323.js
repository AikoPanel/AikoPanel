System.register(["./vendor-legacy-a194f484.js","./AuthWrapper-legacy-8f02bdff.js","./formik.esm-legacy-a3c75cf9.js","./index-legacy-3a6f8cc6.js","./AnimateButton-legacy-300e3bb6.js","./hey-listen.es-legacy-2cf185e9.js"],(function(e,i){"use strict";var r,n,a,l,t,o,s,c,d,m,h,g,p,u,b,w,y,x,f,v,S,j,_,B,C,k,q,A,D,E,F,I,W;return{setters:[e=>{r=e.ba,n=e.bb,a=e.k,l=e.aa,t=e.j,o=e.F,s=e.a_,c=e.l,d=e.B,m=e.o,h=e.aK,g=e.ai,p=e.bc,u=e.ao,b=e.bd,w=e.be,y=e.bf,x=e.bg,f=e.bh,v=e.T,S=e.aH,j=e.m,_=e.bi,B=e.ap},e=>{C=e.A},e=>{k=e.F,q=e.c,A=e.a},e=>{D=e.u,E=e.a,F=e.I,I=e.b},e=>{W=e.A},null],execute:function(){const i=()=>{const[e,i]=r.useState(!1),{isLoggedIn:C}=D((e=>e.auth)),[I]=E(),K=n(),{t:z}=a("common",{keyPrefix:"login"}),[L,M]=r.useState(!1),V=()=>{M(!L)},H=e=>{e.preventDefault()},P=e=>{e.getModifierState("CapsLock")?i(!0):i(!1)},T=l();return t(o,{children:t(k,{initialValues:{email:"",password:"",submit:null},validationSchema:q().shape({email:A().email(z("email_invalid").toString()).max(255).required(z("email_required").toString()),password:A().max(255).required(z("password_required").toString())}),onSubmit:async(e,{setErrors:i,setStatus:r,setSubmitting:n})=>{try{n(!0),await I(e).unwrap().then((()=>{r({success:!0}),s.event("login",{category:"auth",label:"login",method:"email",success:!0,email:e.email}),T("/dashboard",{replace:!0})})).catch((n=>{r({success:!1}),i(c.isEmpty(n.errors)?{submit:n.message}:n.errors),s.event("login",{category:"auth",label:"login",method:"email",success:!1,error:n.message,email:e.email,values:e})})).finally((()=>{n(!1)}))}catch(a){console.error(a),K.current&&(r({success:!1}),i(c.isEmpty(a.errors)?{submit:a.message}:a.errors),n(!1))}},children:({errors:r,handleBlur:n,handleChange:a,handleSubmit:l,isSubmitting:o,touched:s,values:c})=>t(d,{component:"form",noValidate:!0,onSubmit:l,children:m(h,{container:!0,spacing:3,children:[t(h,{item:!0,xs:12,children:m(g,{spacing:1,children:[t(p,{htmlFor:"email-login",children:t(u,{children:"login.email"})}),t(b,{id:"email-login",type:"email",value:c.email,name:"email",onBlur:n,onChange:a,placeholder:z("email_placeholder").toString(),fullWidth:!0,error:Boolean(s.email&&r.email)}),s.email&&r.email&&t(w,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]})}),t(h,{item:!0,xs:12,children:m(g,{spacing:1,children:[t(p,{htmlFor:"password-login",children:t(u,{children:"login.password"})}),t(b,{fullWidth:!0,color:e?"warning":"primary",error:Boolean(s.password&&r.password),id:"-password-login",type:L?"text":"password",value:c.password,name:"password",onBlur:e=>{i(!1),n(e)},onKeyDown:P,onChange:a,endAdornment:t(y,{position:"end",children:t(F,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:H,edge:"end",color:"secondary",children:t(L?x:f,{})})}),placeholder:z("password_placeholder").toString()}),e&&t(v,{variant:"caption",sx:{color:"warning.main"},id:"warning-helper-text-password-login",children:t(u,{ns:"notice",children:"capslock_on"})}),s.password&&r.password&&t(w,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]})}),t(h,{item:!0,xs:12,sx:{mt:-1},children:m(g,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[t(d,{}),t(S,{variant:"h6",component:j,to:C?"/auth/forgot-password":"/forgot-password",color:"text.primary",children:z("forgot_password").toString()})]})}),r.submit&&t(h,{item:!0,xs:12,children:t(w,{error:!0,children:r.submit})}),t(h,{item:!0,xs:12,children:t(W,{children:t(_,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:o?t(B,{size:24}):t(u,{i18nKey:"login.submit",children:"Submit"})})})})]})})})})};e("default",(()=>(I("login"),t(C,{children:m(h,{container:!0,spacing:3,children:[t(h,{item:!0,xs:12,children:m(g,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[t(v,{variant:"h3",children:t(u,{children:"login.title"})}),t(v,{component:j,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:t(u,{children:"login.go-register"})})]})}),t(h,{item:!0,xs:12,children:t(i,{})})]})}))))}}}));
