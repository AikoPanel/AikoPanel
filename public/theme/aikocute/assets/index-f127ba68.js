import{k,j as t,o,ai as _,T as x,B as I,i as tt,ak as O,F as $,bi as S,bz as A,bA as z,l as E,bB as R,bP as Y,cA as T,cO as H,r as q,aa as it,bs as et,bc as nt,cB as at,cp as rt,be as ot,bJ as ct,a9 as dt,ba as st,as as j,aw as L,aj as P,bK as lt,cR as vt,aK as B}from"./vendor-894d6afa.js";import{m as V,C as M,M as D,D as mt,c as K,E as ht,F as ut,G as wt,b as yt}from"./index-33033ac6.js";import{F as Q,c as J,d as U,e as X,a as N}from"./formik.esm-4935cab4.js";import{D as gt}from"./DataGrid-119bddba.js";const Z=V()(i=>({root:{},form:{backgroundColor:"transparent"}})),ft=()=>{var c,m;const{t:i}=k(),{data:e}=M(),[s]=mt(),{classes:v}=Z();tt();const[f,{setLeft:n,setRight:r}]=O(!1);return o($,{children:[t(S,{variant:"contained",onClick:r,children:i("invite.my-invite.invitation-card.transfer-button")}),o(A,{open:f,onClose:n,fullWidth:!0,children:[t(z,{children:i("invite.my-invite.invitation-card.transfer-dialog.title")}),t(Q,{initialValues:{transfer_amount:0},validationSchema:J().shape({transfer_amount:U().min(.01,i("invite.my-invite.invitation-card.transfer-dialog.validation_min",{count:.1}).toString()).max(((c=e==null?void 0:e.stat[4])!=null?c:0)/100,i("invite.my-invite.invitation-card.transfer-dialog.validation_max",{count:((m=e==null?void 0:e.stat[4])!=null?m:0)/100}).toString()).required(i("invite.my-invite.invitation-card.transfer-dialog.validation_required").toString())}),onSubmit:async(p,{setSubmitting:h,setErrors:a,setStatus:l})=>{try{h(!0),await s(p.transfer_amount*100).unwrap(),l({success:!0}),n()}catch(d){a(E.isEmpty(d.errors)?{transfer_amount:d.message}:d.errors),l({success:!1})}finally{h(!1)}},children:({values:p,handleChange:h,handleBlur:a,handleSubmit:l,isSubmitting:d,errors:u,touched:w})=>{var b;return o(I,{component:X,onSubmit:l,className:v.form,children:[t(R,{children:o(_,{spacing:3,children:[t(Y,{severity:"info",children:i("invite.my-invite.invitation-card.transfer-dialog.info",{siteName:K.title})}),t(T,{id:"total-amount",type:"number",disabled:!0,fullWidth:!0,value:((b=e==null?void 0:e.stat[4])!=null?b:0)/100,label:i("invite.my-invite.invitation-card.transfer-dialog.total-amount",{context:"label"}),variant:"standard"}),t(T,{id:"transfer-amount",name:"transfer_amount",type:"number",value:p.transfer_amount,onChange:h,onBlur:a,label:i("invite.my-invite.invitation-card.transfer-dialog.transfer-amount",{context:"label"}),fullWidth:!0,disabled:d,helperText:u.transfer_amount&&w.transfer_amount?u.transfer_amount:void 0,error:Boolean(w.transfer_amount&&u.transfer_amount),variant:"standard"})]})}),o(H,{children:[t(S,{onClick:n,children:i("invite.my-invite.invitation-card.transfer-dialog.cancel-button")}),t(S,{type:"submit",variant:"contained",disabled:d,children:i("invite.my-invite.invitation-card.transfer-dialog.confirm-button")})]})]})}})]})]})},pt=()=>{var a,l;const[i,e]=q.useState(!0),[s,{setLeft:v,setRight:f}]=O(!1),{t:n}=k(),{data:r}=M(),{data:c}=ht(void 0,{skip:i}),[m]=ut(),p=it(),{classes:h}=Z();return o($,{children:[t(S,{variant:"outlined",onClick:()=>{f(),e(!1)},children:n("invite.my-invite.invitation-card.withdraw-button")}),o(A,{open:s,onClose:v,fullWidth:!0,children:[t(z,{children:n("invite.my-invite.invitation-card.withdraw-dialog.title")}),t(Q,{initialValues:{withdraw_method:(a=c==null?void 0:c.withdraw_methods[0])!=null?a:"",withdraw_account:"",withdraw_name:"",withdraw_amount:((l=r==null?void 0:r.stat[4])!=null?l:0)/100},validationSchema:J().shape({withdraw_method:N().required(n("invite.my-invite.invitation-card.withdraw-dialog.validation_required",{name:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-method",{context:"label"})}).toString()),withdraw_account:N().required(n("invite.my-invite.invitation-card.withdraw-dialog.validation_required",{name:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-account",{context:"label"})}).toString()),withdraw_name:N().required(n("invite.my-invite.invitation-card.withdraw-dialog.validation_required",{name:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-name",{context:"label"})}).toString()),withdraw_amount:U().required(n("invite.my-invite.invitation-card.withdraw-dialog.validation_required",{name:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-amount",{context:"label"})}).toString())}),onSubmit:async(d,{setSubmitting:u,setErrors:w,setStatus:b})=>{try{await m(d).unwrap(),b({success:!0}),p("/ticket"),v()}catch(y){w(E.isEmpty(y.errors)?{withdraw_account:y.message}:y.errors),b({success:!1})}finally{u(!1)}},children:({values:d,handleChange:u,handleBlur:w,handleSubmit:b,isSubmitting:y,errors:g,touched:C})=>{var F,G;return o(I,{component:X,onSubmit:b,className:h.form,children:[t(R,{children:o(_,{spacing:3,children:[t(Y,{severity:"info",color:"info",children:n("invite.my-invite.invitation-card.withdraw-dialog.info",{siteName:K.title,amount:((F=r==null?void 0:r.stat[4])!=null?F:0)/100})}),o(et,{fullWidth:!0,variant:"standard",children:[t(nt,{id:"select-payment-label",children:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-method",{context:"label"})}),t(at,{labelId:"select-payment-label",id:"select-payment",name:"withdraw_method",value:d.withdraw_method,label:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-method",{context:"label"}),onChange:u,onBlur:w,disabled:y,children:c==null?void 0:c.withdraw_methods.map(W=>t(rt,{value:W,children:W},W))}),g.withdraw_method&&C.withdraw_method&&t(ot,{error:!0,children:g.withdraw_method})]}),t(T,{id:"withdraw-account",name:"withdraw_account",type:"text",value:d.withdraw_account,onChange:u,onBlur:w,label:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-account",{context:"label"}),fullWidth:!0,disabled:y,helperText:g.withdraw_account&&C.withdraw_account?g.withdraw_account:void 0,error:Boolean(C.withdraw_account&&g.withdraw_account),variant:"standard"}),t(T,{id:"withdraw-name",name:"withdraw_name",type:"text",value:d.withdraw_name,onChange:u,onBlur:w,label:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-name",{context:"label"}),fullWidth:!0,disabled:y,helperText:g.withdraw_name&&C.withdraw_name?g.withdraw_name:void 0,error:Boolean(C.withdraw_name&&g.withdraw_name),variant:"standard"}),t(T,{id:"withdraw-amount",type:"number",disabled:!0,fullWidth:!0,value:((G=r==null?void 0:r.stat[4])!=null?G:0)/100,label:n("invite.my-invite.invitation-card.withdraw-dialog.withdraw-amount",{context:"label"}),variant:"standard"})]})}),o(H,{children:[t(S,{onClick:v,children:n("invite.my-invite.invitation-card.withdraw-dialog.cancel-button")}),t(S,{type:"submit",variant:"contained",disabled:y,children:n("invite.my-invite.invitation-card.withdraw-dialog.confirm-button")})]})]})}})]})]})},bt=()=>{var s;const{t:i}=k(),{data:e}=M();return t(D,{title:i("invite.my-invite.invitation-card.title"),sx:{height:240},children:o(_,{spacing:2,children:[o(_,{direction:"row",spacing:2,alignItems:"flex-end",children:[t(x,{variant:"h2",component:"span",children:Number(((s=e==null?void 0:e.stat[4])!=null?s:0)/100).toLocaleString("vi-VN")}),t(x,{variant:"h6",component:"span",color:"textSecondary",children:i("invite.my-invite.invitation-card.currency")})]}),o(I,{children:[t(x,{variant:"subtitle1",children:i("invite.my-invite.invitation-card.description")}),t(x,{variant:"body2",color:"textSecondary",noWrap:!0,children:i("invite.my-invite.invitation-card.helperText")})]}),o(_,{direction:"row",spacing:2,children:[t(ft,{}),t(pt,{})]})]})})},_t=V()(i=>({root:{height:i.spacing(30),display:"flex",flexDirection:"column","& .MuiCardContent-root":{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"}}})),xt=()=>{const{t:i}=k(),{data:e,isLoading:s}=M(),v=q.useMemo(()=>{var n,r,c,m;return[{label:i("invite.my-invite.info-card.user-register-count"),value:i("invite.my-invite.info-card.user-register-count-value",{count:(n=e==null?void 0:e.stat[0])!=null?n:0})},{label:i("invite.my-invite.info-card.commission-rate"),value:i("invite.my-invite.info-card.commission-rate-value",{rate:(r=e==null?void 0:e.stat[3])!=null?r:0})},{label:i("invite.my-invite.info-card.commission-confirming"),value:i("invite.my-invite.info-card.commission-confirming-value",{count:((c=e==null?void 0:e.stat[2])!=null?c:0)/100})},{label:i("invite.my-invite.info-card.commission-total"),value:i("invite.my-invite.info-card.commission-total-value",{count:((m=e==null?void 0:e.stat[1])!=null?m:0)/100})}]},[e,i]),{classes:f}=_t();return t(D,{title:i("invite.my-invite.info-card.title"),className:f.root,children:t(_,{spacing:2,children:v.map((n,r)=>s?t(ct,{variant:"text",width:"100%"},r):o(_,{direction:"row",justifyContent:"space-between",children:[t(x,{variant:"body1",children:n.label}),t(x,{variant:"body1",children:n.value})]},r))})})},St=()=>{var h;const{t:i}=k(),{data:e,isLoading:s}=M(),[v,{isLoading:f}]=wt(),{enqueueSnackbar:n}=dt(),[r,c]=st.useState(10),m=()=>{v().unwrap().then(()=>{n(i("notice::generate-invite-codes_success"),{variant:"success"})}).catch(a=>{console.error(a),n(i("notice::generate-invite-codes_failed"),{variant:"error"})})},p=q.useMemo(()=>[{field:"id",headerName:i("invite.my-invite.invite-codes-table.id",{context:"header"}).toString(),maxWidth:120,type:"number",valueFormatter:({value:a})=>{var l;return(l=a==null?void 0:a.toString().padStart(4,"0"))!=null?l:a}},{field:"code",headerName:i("invite.my-invite.invite-codes-table.code",{context:"header"}).toString(),description:i("invite.my-invite.invite-codes-table.code",{context:"description"}).toString(),maxWidth:160,type:"string"},{field:"created_at",headerName:i("invite.my-invite.invite-codes-table.created_at",{context:"header"}).toString(),description:i("invite.my-invite.invite-codes-table.created_at",{context:"description"}).toString(),width:200,type:"dateTime",valueGetter:({value:a})=>j.unix(a).toDate(),valueFormatter:({value:a})=>j(a).format("DD-MM-YYYY HH:mm:ss")},{field:"actions",headerName:i("invite.my-invite.invite-codes-table.actions",{context:"header"}).toString(),type:"actions",getActions:a=>[t(L,{title:i("invite.my-invite.invite-codes-table.action-copy",{context:"tooltip"}).toString(),children:t(P,{onClick:()=>{window.navigator.clipboard.writeText(`${window.location.protocol}//${window.location.host}/register?code=${a.row.code}`).then(()=>{n(i("notice::copy_success"),{variant:"success"})})},children:t(lt,{})})},"copy")]}],[e,i]);return t(D,{content:!1,title:i("invite.my-invite.invite-codes-table.title"),secondary:t(L,{title:i("invite.my-invite.invite-codes-table.generate_tooltip"),placement:"left",children:t(P,{onClick:m,disabled:f,children:t(vt,{})})}),children:t(I,{height:{xs:400,md:500},children:t(gt,{columns:p,rows:(h=e==null?void 0:e.codes)!=null?h:[],rowsPerPageOptions:[10,20,50],pageSize:r,onPageSizeChange:a=>c(a),loading:s})})})},Ct=()=>o(B,{container:!0,spacing:2,children:[t(B,{item:!0,xs:12,md:6,children:t(bt,{})}),t(B,{item:!0,xs:12,md:6,children:t(xt,{})}),t(B,{item:!0,xs:12,children:t(St,{})})]}),It=()=>(yt("invite"),t(Ct,{}));export{It as default};
