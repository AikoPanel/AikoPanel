import{aa as k,k as B,r as b,be as M,bf as x,j as e,bd as T,B as w,o as u,aj as m,c8 as U,T as V,bm as W,aq as q,bs as F,bg as $,c9 as G,ca as I,bT as L}from"./vendor-4c8effbd.js";import{J as A,K as O,M as _,N as Q,E as D,j as J,O as K,b as N}from"./index-efdad191.js";const P={avatar:"",submit:null},H=()=>{const{enqueueSnackbar:d}=k(),{t:a}=B(),g=A(),[i]=O(),v=b.useMemo(()=>M({avatar:x().url(a("utils.change-avatar-card.form.url",{context:"invalid"}).toString()).required(a("utils.change-avatar-card.form.avatar",{context:"required"}).toString())}),[a]),f=b.useCallback(async(c,{setSubmitting:o,setStatus:t,setErrors:s})=>{try{await i(c).unwrap(),t({success:!0}),d(a("notice::update-user_success"),{variant:"success"})}catch(r){const n=r;console.error("Error changing Avatar",n),t({success:!1,message:n.message}),s(n.errors||{submit:n.message})}finally{o(!1)}},[i,g,d,a]);return e(_,{title:a("utils.change-avatar-card.title"),children:e(T,{initialValues:P,validationSchema:v,onSubmit:f,children:({handleChange:c,handleBlur:o,handleSubmit:t,errors:s,touched:r,isSubmitting:n,values:h})=>e(w,{component:"form",onSubmit:t,children:u(m,{spacing:2,children:[e(U,{type:"avatar",id:"avatar-label",name:"avatar",label:a("utils.change-avatar-card.form.avatar",{context:"label"}),value:h.avatar,onChange:c,onBlur:o,error:Boolean(r.avatar&&s.avatar),helperText:r.avatar&&s.avatar,disabled:n,fullWidth:!0}),u(m,{direction:"row",justifyContent:"space-between",children:[e(w,{children:e(V,{variant:"caption",color:"error",noWrap:!0,children:s.submit})}),e(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:e(W,{type:"submit",variant:"contained",disabled:n,children:n?e(q,{size:16}):a("utils.change-avatar-card.form.submit-button")})})]})]})})})})},R=()=>{const{enqueueSnackbar:d}=k(),{t:a}=B(),[g]=Q(),{data:i,isLoading:v}=D(),{data:f}=J(),[c,o]=b.useState(!1),t={sni:"",customSni:"",submit:null},s=b.useMemo(()=>M({sni:x().required(a("utils.change-sni-card.form.sni",{context:"required"}).toString()),customSni:x().when("sni",{is:n=>n==="other",then:x().required(a("utils.change-sni-card.form.sni.custom",{context:"required"}).toString())})}),[a]),r=b.useCallback(async(n,{setSubmitting:h,setStatus:S,setErrors:j})=>{const C={...n,sni:n.sni==="other"?n.customSni:n.sni};try{await g(C).unwrap(),S({success:!0}),d(a("notice::update-user_success"),{variant:"success"})}catch(y){const l=y;console.error("Error changing Sni",l),S({success:!1,message:l.message}),j(l.errors||{submit:l.message})}finally{h(!1)}},[g,d,a]);return v?e(q,{}):u(_,{title:a("utils.change-sni-card.title"),children:[f&&e(V,{variant:"body1",children:a("utils.change-sni-card.current-sni",{sni:f.sni})}),e(T,{initialValues:t,validationSchema:s,onSubmit:r,children:({setFieldValue:n,handleChange:h,handleBlur:S,handleSubmit:j,errors:C,touched:y,isSubmitting:l,values:E})=>e(w,{component:"form",onSubmit:j,noValidate:!0,children:u(m,{spacing:2,children:[u(F,{fullWidth:!0,children:[e($,{id:"sni-select-label",children:a("utils.change-sni-card.form.sni.label")}),u(G,{labelId:"sni-select-label",id:"sni-select",name:"sni",value:E.sni,onChange:p=>{const z=p.target.value==="other";o(z),n("sni",p.target.value)},onBlur:S,error:Boolean(y.sni&&C.sni),disabled:l,children:[i==null?void 0:i.sni.map(p=>e(I,{value:p.value,children:p.lable},p.value)),e(I,{value:"other",children:a("utils.change-sni-card.form.sni.other")})]})]}),c&&e(U,{id:"customSni",name:"customSni",label:a("utils.change-sni-card.form.sni.custom"),value:E.customSni,onChange:h,onBlur:S,error:Boolean(y.customSni&&C.customSni),helperText:y.customSni&&C.customSni,disabled:l,fullWidth:!0}),e(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:e(W,{type:"submit",variant:"contained",disabled:l,children:l?e(q,{size:24}):a("utils.change-sni-card.form.submit-button")})})]})})})]})},X={username:"",submit:null},Y=()=>{const{enqueueSnackbar:d}=k(),{t:a}=B(),g=A(),[i]=K(),v=b.useMemo(()=>M({username:x().required(a("utils.change-username-card.form.username",{context:"required"}).toString())}),[a]),f=b.useCallback(async(c,{setSubmitting:o,setStatus:t,setErrors:s})=>{try{await i(c).unwrap(),t({success:!0}),d(a("notice::update-user_success"),{variant:"success"})}catch(r){const n=r;console.error("Error changing Username",n),t({success:!1,message:n.message}),s(n.errors||{submit:n.message})}finally{o(!1)}},[i,g,d,a]);return e(_,{title:a("utils.change-username-card.title"),children:e(T,{initialValues:X,validationSchema:v,onSubmit:f,children:({handleChange:c,handleBlur:o,handleSubmit:t,errors:s,touched:r,isSubmitting:n,values:h})=>e(w,{component:"form",onSubmit:t,children:u(m,{spacing:2,children:[e(U,{type:"username",id:"username-label",name:"username",label:a("utils.change-username-card.form.username",{context:"label"}),value:h.username,onChange:c,onBlur:o,error:Boolean(r.username&&s.username),helperText:r.username&&s.username,disabled:n,fullWidth:!0}),u(m,{direction:"row",justifyContent:"space-between",children:[e(w,{children:e(V,{variant:"caption",color:"error",noWrap:!0,children:s.submit})}),e(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:e(W,{type:"submit",variant:"contained",disabled:n,children:n?e(q,{size:16}):a("utils.change-username-card.form.submit-button")})})]})]})})})})},Z=()=>u(L,{spacing:2,columns:{xs:1,md:2,xl:3},children:[e(R,{}),e(Y,{}),e(H,{})]}),ne=()=>(N("utils"),e(Z,{}));export{ne as default};
