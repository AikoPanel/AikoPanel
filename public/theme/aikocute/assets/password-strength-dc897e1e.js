import{r as H,bv as Ue,ba as oe,bw as R,bx as Ve,a9 as Ie,k as Oe,j as T,bf as _e,by as Se,o as me,F as We,bz as Me,bA as Be,ao as $e,bB as qe,l as ze,a_ as be}from"./vendor-894d6afa.js";import{f as we,e as Re,I as xe}from"./index-33033ac6.js";var Ce={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=c(H),d=["placeholder","separator","isLastChild","ariaLabelOverride","shouldRender","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure","onSubmit"];function o(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,p=new WeakMap;return(o=function(a){return a?p:i})(r)}function c(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||W(r)!=="object"&&typeof r!="function")return{default:r};var p=o(i);if(p&&p.has(r))return p.get(r);var e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in r)if(l!=="default"&&Object.prototype.hasOwnProperty.call(r,l)){var m=a?Object.getOwnPropertyDescriptor(r,l):null;m&&(m.get||m.set)?Object.defineProperty(e,l,m):e[l]=r[l]}return e.default=r,p&&p.set(r,e),e}function h(){return h=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var e in p)Object.prototype.hasOwnProperty.call(p,e)&&(r[e]=p[e])}return r},h.apply(this,arguments)}function L(r,i){if(r==null)return{};var p=x(r,i),e,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(a=0;a<l.length;a++)e=l[a],!(i.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(r,e)&&(p[e]=r[e])}return p}function x(r,i){if(r==null)return{};var p={},e=Object.keys(r),a,l;for(l=0;l<e.length;l++)a=e[l],!(i.indexOf(a)>=0)&&(p[a]=r[a]);return p}function P(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function w(r,i){for(var p=0;p<i.length;p++){var e=i[p];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function D(r,i,p){return i&&w(r.prototype,i),p&&w(r,p),Object.defineProperty(r,"prototype",{writable:!1}),r}function y(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&f(r,i)}function f(r,i){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},f(r,i)}function I(r){var i=z();return function(){var e=B(r),a;if(i){var l=B(this).constructor;a=Reflect.construct(e,arguments,l)}else a=e.apply(this,arguments);return C(this,a)}}function C(r,i){if(i&&(W(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(r)}function b(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function B(r){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},B(r)}function g(r,i,p){return i in r?Object.defineProperty(r,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[i]=p,r}function W(r){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W(r)}var U=8,K=37,Q=39,O=46,$=32,ee=13,A=function(i){return W(i)==="object"},Z=function(r){y(p,r);var i=I(p);function p(e){var a;return P(this,p),a=i.call(this,e),g(b(a),"getClasses",function(){for(var l=arguments.length,m=new Array(l),t=0;t<l;t++)m[t]=arguments[t];return m.filter(function(u){return!A(u)&&u!==!1}).join(" ")}),g(b(a),"getType",function(){var l=a.props,m=l.isInputSecure,t=l.isInputNum;return m?"password":t?"tel":"text"}),g(b(a),"getAriaLabel",function(l,m){var t=a.props.ariaLabelOverride;return t||"".concat(l===0?"Please enter verification code. ":"").concat(m?"Digit":"Character"," ").concat(l+1)}),a.input=s.default.createRef(),a}return D(p,[{key:"componentDidMount",value:function(){var a=this.props,l=a.focus,m=a.shouldAutoFocus,t=this.input.current;t&&l&&m&&t.focus()}},{key:"componentDidUpdate",value:function(a){var l=this.props.focus,m=this.input.current;a.focus!==l&&m&&l&&(m.focus(),m.select())}},{key:"render",value:function(){var a=this.props,l=a.placeholder,m=a.separator,t=a.isLastChild;a.ariaLabelOverride;var u=a.shouldRender,v=a.inputStyle,E=a.focus,N=a.isDisabled,F=a.hasErrored,_=a.errorStyle,k=a.focusStyle,V=a.disabledStyle;a.shouldAutoFocus;var q=a.isInputNum,M=a.index,J=a.value,te=a.className;a.isInputSecure,a.onSubmit;var re=L(a,d);return s.default.createElement("div",{className:te,style:{display:"flex",alignItems:"center"}},s.default.createElement("input",h({"aria-label":this.getAriaLabel(M,q),style:Object.assign({width:"1em",textAlign:"center",padding:0},A(v)&&v,E&&A(k)&&k,N&&A(V)&&V,F&&A(_)&&_),placeholder:l,className:this.getClasses(v,E&&k,N&&V,F&&_),type:this.getType(),ref:this.input,disabled:N,value:J||""},re)),!t&&u&&m)}}]),p}(s.PureComponent),ue=function(r){y(p,r);var i=I(p);function p(){var e;P(this,p);for(var a=arguments.length,l=new Array(a),m=0;m<a;m++)l[m]=arguments[m];return e=i.call.apply(i,[this].concat(l)),g(b(e),"state",{activeInput:0}),g(b(e),"getOtpValue",function(){return e.props.value?e.props.value.toString().split(""):[]}),g(b(e),"getPlaceholderValue",function(){var t=e.props,u=t.placeholder,v=t.numInputs;if(typeof u=="string"){if(u.length===v)return u;u.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}}),g(b(e),"handleOtpChange",function(t){var u=e.props.onChange,v=t.join("");u(v)}),g(b(e),"isInputValueValid",function(t){var u=e.props.isInputNum?!isNaN(parseInt(t,10)):typeof t=="string";return u&&t.trim().length===1}),g(b(e),"focusInput",function(t){var u=e.props.numInputs,v=Math.max(Math.min(u-1,t),0);e.setState({activeInput:v})}),g(b(e),"focusNextInput",function(){var t=e.state.activeInput;e.focusInput(t+1)}),g(b(e),"focusPrevInput",function(){var t=e.state.activeInput;e.focusInput(t-1)}),g(b(e),"changeCodeAtFocus",function(t){var u=e.state.activeInput,v=e.getOtpValue();v[u]=t[0],e.handleOtpChange(v)}),g(b(e),"handleOnPaste",function(t){t.preventDefault();var u=e.state.activeInput,v=e.props,E=v.numInputs,N=v.isDisabled;if(!N){for(var F=e.getOtpValue(),_=u,k=t.clipboardData.getData("text/plain"),V=e.props.isInputNum?k.replace(/\D/g,""):k,q=V.slice(0,E-u).split(""),M=0;M<E;++M)M>=u&&q.length>0&&(F[M]=q.shift(),_++);e.setState({activeInput:_},function(){e.focusInput(_),e.handleOtpChange(F)})}}),g(b(e),"handleOnChange",function(t){var u=t.target.value;e.isInputValueValid(u)&&e.changeCodeAtFocus(u)}),g(b(e),"focusPrevInputAndChangeCode",function(t){var u=e.state.activeInput,v=e.getOtpValue();v[u]!=t[0]?(v[u]=t[0],v[u+1]!=t[0]&&e.focusInput(v.length-1)):e.focusInput(u-1),e.handleOtpChange(v)}),g(b(e),"handleOnKeyDown",function(t){t.keyCode===U||t.key==="Backspace"?(t.preventDefault(),e.focusPrevInputAndChangeCode("")):t.keyCode===O||t.key==="Delete"?(t.preventDefault(),e.changeCodeAtFocus("")):t.keyCode===K||t.key==="ArrowLeft"?(t.preventDefault(),e.focusPrevInput()):t.keyCode===Q||t.key==="ArrowRight"?(t.preventDefault(),e.focusNextInput()):t.keyCode===$||t.key===" "||t.key==="Spacebar"||t.key==="Space"?t.preventDefault():(t.keyCode===ee||t.key==="Enter")&&e.props.onSubmit()}),g(b(e),"handleOnInput",function(t){var u=t.target.value;if(t.target.value){if(t.target.value&&t.target.value.length>1){t.preventDefault();for(var v=e.props.numInputs,E=e.state.activeInput,N=e.getOtpValue(),F=t.target.value.slice(0,v-E).split(""),_=0;_<v;++_)_>=E&&F.length>0&&(N[_]=F.shift());e.handleOtpChange(N),e.focusInput(e.props.numInputs)}else if(u&&u.trim().length>1)t.clipboardData={getData:function(){return u.trim()}},e.handleOnPaste(t);else if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var k=t.nativeEvent;k.data===null&&k.inputType==="deleteContentBackward"&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}}}),g(b(e),"renderInputs",function(){for(var t=e.state.activeInput,u=e.props,v=u.id,E=u.autoComplete,N=u.numInputs,F=u.inputStyle,_=u.focusStyle,k=u.separator,V=u.separateAfter,q=V===void 0?1:V,M=u.isDisabled,J=u.disabledStyle,te=u.hasErrored,re=u.errorStyle,Pe=u.shouldAutoFocus,De=u.isInputNum,Ae=u.isInputSecure,Ne=u.className,G=u.inputProps,ke=u.onSubmit,pe=[],le=e.getOtpValue(),de=e.getPlaceholderValue(),fe=e.props["data-cy"],he=e.props["data-testid"],ve=e.props["custom-test-attr"],ye=e.props["custom-test-id"],je=function(S){var ae=void 0;(S+1)%parseInt(q)===0?ae=!0:ae=!1;var ge={};ve&&(ge[ve]=ye&&"".concat(ye,"-").concat(S));var ie={};G&&(Array.isArray(G)?G[S]&&(ie=G[S]):ie=G),pe.push(s.default.createElement(Z,h({id:v&&"".concat(v,"-").concat(S),autoComplete:E!=null?E:"off",placeholder:de&&de[S],key:S,index:S,focus:t===S,value:le&&le[S],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(Fe){e.setState({activeInput:S}),Fe.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:k,inputStyle:F,focusStyle:_,isLastChild:S===N-1,isDisabled:M,disabledStyle:J,hasErrored:te,errorStyle:re,shouldAutoFocus:Pe,isInputNum:De,isInputSecure:Ae,className:Ne,"data-cy":fe&&"".concat(fe,"-").concat(S),"data-testid":he&&"".concat(he,"-").concat(S),shouldRender:ae,onSubmit:ke},ie,ge)))},ne=0;ne<N;ne++)je(ne);return pe}),e}return D(p,[{key:"componentDidUpdate",value:function(){var a=this.props.value,l=this.state.activeInput;a==""&&l>0&&this.setState({activeInput:0})}},{key:"render",value:function(){var a=this.props.containerStyle;return s.default.createElement("div",{style:Object.assign({display:"flex"},A(a)&&a),className:A(a)?"":a},this.renderInputs())}}]),p}(s.Component);g(ue,"defaultProps",{numInputs:4,onChange:function(i){return console.log(i)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1,onSubmit:function(i){return console.log(i)}});var Le=ue;n.default=Le})(Ce);const ut=Ue(Ce);function se(){return se=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(n[o]=d[o])}return n},se.apply(this,arguments)}function Ge(n,s){if(n==null)return{};var d={},o=Object.keys(n),c,h;for(h=0;h<o.length;h++)c=o[h],!(s.indexOf(c)>=0)&&(d[c]=n[c]);return d}function X(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function He(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s}var Y=function(n){He(s,n);function s(){var o;return o=n.call(this)||this,o.handleExpired=o.handleExpired.bind(X(o)),o.handleErrored=o.handleErrored.bind(X(o)),o.handleChange=o.handleChange.bind(X(o)),o.handleRecaptchaRef=o.handleRecaptchaRef.bind(X(o)),o}var d=s.prototype;return d.getValue=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this.props.grecaptcha.getResponse(this._widgetId):null},d.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},d.execute=function(){var c=this.props.grecaptcha;if(c&&this._widgetId!==void 0)return c.execute(this._widgetId);this._executeRequested=!0},d.executeAsync=function(){var c=this;return new Promise(function(h,L){c.executionResolve=h,c.executionReject=L,c.execute()})},d.reset=function(){this.props.grecaptcha&&this._widgetId!==void 0&&this.props.grecaptcha.reset(this._widgetId)},d.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},d.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},d.handleChange=function(c){this.props.onChange&&this.props.onChange(c),this.executionResolve&&(this.executionResolve(c),delete this.executionReject,delete this.executionResolve)},d.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=this.props.grecaptcha.render(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},d.componentDidMount=function(){this.explicitRender()},d.componentDidUpdate=function(){this.explicitRender()},d.componentWillUnmount=function(){this._widgetId!==void 0&&(this.delayOfCaptchaIframeRemoving(),this.reset())},d.delayOfCaptchaIframeRemoving=function(){var c=document.createElement("div");for(document.body.appendChild(c),c.style.display="none";this.captcha.firstChild;)c.appendChild(this.captcha.firstChild);setTimeout(function(){document.body.removeChild(c)},5e3)},d.handleRecaptchaRef=function(c){this.captcha=c},d.render=function(){var c=this.props;c.sitekey,c.onChange,c.theme,c.type,c.tabindex,c.onExpired,c.onErrored,c.size,c.stoken,c.grecaptcha,c.badge,c.hl;var h=Ge(c,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]);return oe.createElement("div",se({},h,{ref:this.handleRecaptchaRef}))},s}(oe.Component);Y.displayName="ReCAPTCHA";Y.propTypes={sitekey:R.string.isRequired,onChange:R.func,grecaptcha:R.object,theme:R.oneOf(["dark","light"]),type:R.oneOf(["image","audio"]),tabindex:R.number,onExpired:R.func,onErrored:R.func,size:R.oneOf(["compact","normal","invisible"]),stoken:R.string,hl:R.string,badge:R.oneOf(["bottomright","bottomleft","inline"])};Y.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function ce(){return ce=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(n[o]=d[o])}return n},ce.apply(this,arguments)}function Ke(n,s){if(n==null)return{};var d={},o=Object.keys(n),c,h;for(h=0;h<o.length;h++)c=o[h],!(s.indexOf(c)>=0)&&(d[c]=n[c]);return d}function Qe(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s}var j={},Ze=0;function Je(n,s){return s=s||{},function(o){var c=o.displayName||o.name||"Component",h=function(x){Qe(P,x);function P(D,y){var f;return f=x.call(this,D,y)||this,f.state={},f.__scriptURL="",f}var w=P.prototype;return w.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+Ze++),this.__scriptLoaderID},w.setupScriptURL=function(){return this.__scriptURL=typeof n=="function"?n():n,this.__scriptURL},w.asyncScriptLoaderHandleLoad=function(y){var f=this;this.setState(y,function(){return f.props.asyncScriptOnLoad&&f.props.asyncScriptOnLoad(f.state)})},w.asyncScriptLoaderTriggerOnScriptLoaded=function(){var y=j[this.__scriptURL];if(!y||!y.loaded)throw new Error("Script is not loaded.");for(var f in y.observers)y.observers[f](y);delete window[s.callbackName]},w.componentDidMount=function(){var y=this,f=this.setupScriptURL(),I=this.asyncScriptLoaderGetScriptLoaderID(),C=s,b=C.globalName,z=C.callbackName,B=C.scriptId;if(b&&typeof window[b]<"u"&&(j[f]={loaded:!0,observers:{}}),j[f]){var g=j[f];if(g&&(g.loaded||g.errored)){this.asyncScriptLoaderHandleLoad(g);return}g.observers[I]=function(O){return y.asyncScriptLoaderHandleLoad(O)};return}var W={};W[I]=function(O){return y.asyncScriptLoaderHandleLoad(O)},j[f]={loaded:!1,observers:W};var U=document.createElement("script");U.src=f,U.async=!0;for(var K in s.attributes)U.setAttribute(K,s.attributes[K]);B&&(U.id=B);var Q=function($){if(j[f]){var ee=j[f],A=ee.observers;for(var Z in A)$(A[Z])&&delete A[Z]}};z&&typeof window<"u"&&(window[z]=function(){return y.asyncScriptLoaderTriggerOnScriptLoaded()}),U.onload=function(){var O=j[f];O&&(O.loaded=!0,Q(function($){return z?!1:($(O),!0)}))},U.onerror=function(){var O=j[f];O&&(O.errored=!0,Q(function($){return $(O),!0}))},document.body.appendChild(U)},w.componentWillUnmount=function(){var y=this.__scriptURL;if(s.removeOnUnmount===!0)for(var f=document.getElementsByTagName("script"),I=0;I<f.length;I+=1)f[I].src.indexOf(y)>-1&&f[I].parentNode&&f[I].parentNode.removeChild(f[I]);var C=j[y];C&&(delete C.observers[this.asyncScriptLoaderGetScriptLoaderID()],s.removeOnUnmount===!0&&delete j[y])},w.render=function(){var y=s.globalName,f=this.props;f.asyncScriptOnLoad;var I=f.forwardedRef,C=Ke(f,["asyncScriptOnLoad","forwardedRef"]);return y&&typeof window<"u"&&(C[y]=typeof window[y]<"u"?window[y]:void 0),C.ref=I,H.createElement(o,C)},P}(H.Component),L=H.forwardRef(function(x,P){return H.createElement(h,ce({},x,{forwardedRef:P}))});return L.displayName="AsyncScriptLoader("+c+")",L.propTypes={asyncScriptOnLoad:R.func},Ve(L,o)}}var Ee="onloadcallback",Xe="grecaptcha";function Ye(){return typeof window<"u"&&window.recaptchaOptions||{}}function et(){var n=Ye(),s=n.useRecaptchaNet?"recaptcha.net":"www.google.com";return"https://"+s+"/recaptcha/api.js?onload="+Ee+"&render=explicit"}const tt=Je(et,{callbackName:Ee,globalName:Xe})(Y),rt=({email:n})=>{const{data:s}=Re(),[d,{isLoading:o}]=we(),{enqueueSnackbar:c}=Ie(),{t:h}=Oe(),[L,x]=oe.useState(!1);return me(We,{children:[T(_e,{position:"end",children:T(xe,{"aria-label":"send email code",onClick:()=>x(!0),edge:"end",color:"secondary",disabled:o,children:T(Se,{})})}),me(Me,{open:L,onClose:()=>x(!1),children:[T(Be,{children:T($e,{i18nKey:"auth.captcha.title",children:"Captcha"})}),T(qe,{children:T(tt,{sitekey:s==null?void 0:s.recaptcha_site_key,onChange:P=>{if(ze.isNull(P)){c(h("auth.captcha.error_null_token"),{variant:"error"});return}d({email:n,recaptcha_data:P}).unwrap().then(()=>{c(h("auth.captcha.success"),{variant:"success"}),be.event("send_email_verify",{category:"auth",label:"send_email_verify",email:n,success:!0})}).catch(w=>{console.error(w),c(h("auth.captcha.error"),{variant:"error"}),be.event("send_email_verify",{category:"auth",label:"send_email_verify",email:n,success:!1,error:w})}).finally(()=>{x(!1)})}})})]})]})},pt=({email:n})=>{const[s,{isLoading:d}]=we(),{data:o}=Re(),{enqueueSnackbar:c}=Ie(),{t:h}=Oe(),L=()=>{console.log("send email code"),s({email:n}).unwrap().then(()=>{c(h("auth.captcha.success"),{variant:"success"})}).catch(x=>{console.error(x),c(h("auth.captcha.error"),{variant:"error"})})};return(o==null?void 0:o.is_recaptcha)===1?T(rt,{email:n}):T(_e,{position:"end",children:T(xe,{"aria-label":"send email code",onClick:L,edge:"end",color:"secondary",disabled:d,children:T(Se,{})})})},nt=n=>new RegExp(/[0-9]/).test(n),at=n=>new RegExp(/[a-z]/).test(n)&&new RegExp(/[A-Z]/).test(n),it=n=>new RegExp(/[!#@$%^&*)(+=._-]/).test(n),lt=n=>n<2?{label:"Poor",color:"error.main"}:n<3?{label:"Weak",color:"warning.main"}:n<4?{label:"Normal",color:"warning.dark"}:n<5?{label:"Good",color:"success.main"}:n<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"},dt=n=>{let s=0;return n.length>5&&(s+=1),n.length>7&&(s+=1),nt(n)&&(s+=1),it(n)&&(s+=1),at(n)&&(s+=1),s};export{ut as O,pt as S,lt as a,dt as s};
