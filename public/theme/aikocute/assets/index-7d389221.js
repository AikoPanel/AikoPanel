import{j as r,k as b,a9 as x,ba as v,r as f,aH as w,m as s,as as l,aw as d,aj as c,bg as y,cf as N}from"./vendor-894d6afa.js";import{M as _,t as D,v as C,m as I,b as E}from"./index-33033ac6.js";import{D as L}from"./DataGrid-119bddba.js";import{O as a}from"./order-f9773b97.js";const O=({children:t,className:o})=>r(_,{className:o,content:!1,children:t}),G=()=>{const{t}=b(),{data:o,isLoading:u}=D(void 0,{pollingInterval:1e3*60}),[g,{isLoading:p}]=C(),{enqueueSnackbar:i}=x(),[m,h]=v.useState(10),S=f.useMemo(()=>[{field:"trade_no",headerName:t("order.list.table.trade_no",{context:"header"}).toString(),description:t("order.list.table.trade_no",{context:"description"}).toString(),width:240,type:"string",renderCell:e=>r(w,{component:s,to:`/order/${e.value}`,underline:"none",children:e.value}),sortComparator:(e,n)=>parseInt(e)-parseInt(n)},{field:"plan.name",headerName:t("order.list.table.plan_name",{context:"header"}).toString(),description:t("order.list.table.plan_name",{context:"description"}).toString(),width:180,type:"string",valueGetter:e=>e.row.plan.name},{field:"total_amount",headerName:t("order.list.table.total_amount",{context:"header"}).toString(),description:t("order.list.table.total_amount",{context:"description"}).toString(),width:180,type:"number",valueGetter:e=>e.row.total_amount/100,valueFormatter:e=>`${e.value.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`},{field:"period",sortable:!1,headerName:t("order.list.table.period",{context:"header"}).toString(),description:t("order.list.table.period",{context:"description"}).toString(),width:120,type:"string",valueFormatter:e=>t("order.list.table.period-value",{context:e.value}).toString()},{field:"status",headerName:t("order.list.table.status",{context:"header"}).toString(),description:t("order.list.table.status",{context:"description"}).toString(),width:120,type:"string",sortable:!1,valueFormatter:e=>{switch(e.value){case a.PENDING:return t("order.list.table.status-value",{context:"pending"}).toString();case a.PAID:return t("order.list.table.status-value",{context:"paid"}).toString();case a.CANCELLED:return t("order.list.table.status-value",{context:"cancelled"}).toString();case a.FINISHED:return t("order.list.table.status-value",{context:"finished"}).toString();case a.DEDUCTED:return t("order.list.table.status-value",{context:"deducted"}).toString();default:return e.value}}},{field:"created_at",headerName:t("order.list.table.created_at",{context:"header"}).toString(),description:t("order.list.table.created_at",{context:"description"}).toString(),width:180,type:"dateTime",valueGetter:e=>l.unix(e.row.created_at).toDate(),valueFormatter:e=>l(e.value).format("DD-MM-YYYY HH:mm:ss")},{field:"actions",headerName:t("order.list.table.action",{context:"header"}).toString(),width:120,sortable:!1,type:"actions",getActions:e=>[r(d,{title:t("order.list.table.action-view",{context:"tooltip"}).toString(),children:r(c,{size:"small",component:s,to:`/order/${e.row.trade_no}`,children:r(y,{})})},e.id),...e.row.status===a.PENDING?[r(d,{title:t("order.list.table.action-cancel",{context:"tooltip"}).toString(),children:r(c,{size:"small",onClick:()=>{g(e.row.trade_no).unwrap().then(()=>{i(t("notice::order-cancel",{context:"success"}).toString(),{variant:"success"})}).catch(n=>{console.error("error cancelling order",n),i(t("notice::order-cancel",{context:"fail"}).toString(),{variant:"error"})})},disabled:p,children:r(N,{})})},e.id)]:[]]}],[o,t]);return r(L,{columns:S,rows:o!=null?o:[],loading:u,getRowId:e=>e.trade_no,rowsPerPageOptions:[5,10,25,50],pageSize:m,onPageSizeChange:e=>h(e)})},P=I()(t=>({root:{flexGrow:1,height:"100%",display:"flex",flexDirection:"column"}})),k=()=>{const{classes:t}=P();return r(O,{className:t.root,children:r(G,{})})},j=()=>(E("order-list"),r(k,{}));export{j as default};
