import{a9 as M,k,r as b,j as e,B as w,o as u,ai as m,cA as j,T,bi as U,ap as q,bs as z,bc as $,cB as G,cp as E}from"./vendor-894d6afa.js";import{J as I,K as L,M as V,N as O,E as Q,j as D,O as J,b as K}from"./index-33033ac6.js";import{c as W,a as x,F as _}from"./formik.esm-4935cab4.js";import{M as N}from"./Masonry-a910b117.js";const P={avatar:"",submit:null},H=()=>{const{enqueueSnackbar:d}=M(),{t:a}=k(),g=I(),[i]=L(),v=b.useMemo(()=>W({avatar:x().url(a("utils.change-avatar-card.form.url",{context:"invalid"}).toString()).required(a("utils.change-avatar-card.form.avatar",{context:"required"}).toString())}),[a]),f=b.useCallback(async(c,{setSubmitting:o,setStatus:t,setErrors:s})=>{try{await i(c).unwrap(),t({success:!0}),d(a("notice::update-user_success"),{variant:"success"})}catch(r){const n=r;console.error("Error changing Avatar",n),t({success:!1,message:n.message}),s(n.errors||{submit:n.message})}finally{o(!1)}},[i,g,d,a]);return e(V,{title:a("utils.change-avatar-card.title"),children:e(_,{initialValues:P,validationSchema:v,onSubmit:f,children:({handleChange:c,handleBlur:o,handleSubmit:t,errors:s,touched:r,isSubmitting:n,values:h})=>e(w,{component:"form",onSubmit:t,children:u(m,{spacing:2,children:[e(j,{type:"avatar",id:"avatar-label",name:"avatar",label:a("utils.change-avatar-card.form.avatar",{context:"label"}),value:h.avatar,onChange:c,onBlur:o,error:Boolean(r.avatar&&s.avatar),helperText:r.avatar&&s.avatar,disabled:n,fullWidth:!0}),u(m,{direction:"row",justifyContent:"space-between",children:[e(w,{children:e(T,{variant:"caption",color:"error",noWrap:!0,children:s.submit})}),e(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:e(U,{type:"submit",variant:"contained",disabled:n,children:n?e(q,{size:16}):a("utils.change-avatar-card.form.submit-button")})})]})]})})})})},R=()=>{const{enqueueSnackbar:d}=M(),{t:a}=k(),[g]=O(),{data:i,isLoading:v}=Q(),{data:f}=D(),[c,o]=b.useState(!1),t={sni:"",customSni:"",submit:null},s=b.useMemo(()=>W({sni:x().required(a("utils.change-sni-card.form.sni",{context:"required"}).toString()),customSni:x().when("sni",{is:n=>n==="other",then:x().required(a("utils.change-sni-card.form.sni.custom",{context:"required"}).toString())})}),[a]),r=b.useCallback(async(n,{setSubmitting:h,setStatus:S,setErrors:B})=>{const C={...n,sni:n.sni==="other"?n.customSni:n.sni};try{await g(C).unwrap(),S({success:!0}),d(a("notice::update-user_success"),{variant:"success"})}catch(y){const l=y;console.error("Error changing Sni",l),S({success:!1,message:l.message}),B(l.errors||{submit:l.message})}finally{h(!1)}},[g,d,a]);return v?e(q,{}):u(V,{title:a("utils.change-sni-card.title"),children:[f&&e(T,{variant:"body1",children:a("utils.change-sni-card.current-sni",{sni:f.sni})}),e(_,{initialValues:t,validationSchema:s,onSubmit:r,children:({setFieldValue:n,handleChange:h,handleBlur:S,handleSubmit:B,errors:C,touched:y,isSubmitting:l,values:A})=>e(w,{component:"form",onSubmit:B,noValidate:!0,children:u(m,{spacing:2,children:[u(z,{fullWidth:!0,children:[e($,{id:"sni-select-label",children:a("utils.change-sni-card.form.sni.label")}),u(G,{labelId:"sni-select-label",id:"sni-select",name:"sni",value:A.sni,onChange:p=>{const F=p.target.value==="other";o(F),n("sni",p.target.value)},onBlur:S,error:Boolean(y.sni&&C.sni),disabled:l,children:[i==null?void 0:i.sni.map(p=>e(E,{value:p.value,children:p.lable},p.value)),e(E,{value:"other",children:a("utils.change-sni-card.form.sni.other")})]})]}),c&&e(j,{id:"customSni",name:"customSni",label:a("utils.change-sni-card.form.sni.custom"),value:A.customSni,onChange:h,onBlur:S,error:Boolean(y.customSni&&C.customSni),helperText:y.customSni&&C.customSni,disabled:l,fullWidth:!0}),e(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:e(U,{type:"submit",variant:"contained",disabled:l,children:l?e(q,{size:24}):a("utils.change-sni-card.form.submit-button")})})]})})})]})},X={username:"",submit:null},Y=()=>{const{enqueueSnackbar:d}=M(),{t:a}=k(),g=I(),[i]=J(),v=b.useMemo(()=>W({username:x().required(a("utils.change-username-card.form.username",{context:"required"}).toString())}),[a]),f=b.useCallback(async(c,{setSubmitting:o,setStatus:t,setErrors:s})=>{try{await i(c).unwrap(),t({success:!0}),d(a("notice::update-user_success"),{variant:"success"})}catch(r){const n=r;console.error("Error changing Username",n),t({success:!1,message:n.message}),s(n.errors||{submit:n.message})}finally{o(!1)}},[i,g,d,a]);return e(V,{title:a("utils.change-username-card.title"),children:e(_,{initialValues:X,validationSchema:v,onSubmit:f,children:({handleChange:c,handleBlur:o,handleSubmit:t,errors:s,touched:r,isSubmitting:n,values:h})=>e(w,{component:"form",onSubmit:t,children:u(m,{spacing:2,children:[e(j,{type:"username",id:"username-label",name:"username",label:a("utils.change-username-card.form.username",{context:"label"}),value:h.username,onChange:c,onBlur:o,error:Boolean(r.username&&s.username),helperText:r.username&&s.username,disabled:n,fullWidth:!0}),u(m,{direction:"row",justifyContent:"space-between",children:[e(w,{children:e(T,{variant:"caption",color:"error",noWrap:!0,children:s.submit})}),e(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:e(U,{type:"submit",variant:"contained",disabled:n,children:n?e(q,{size:16}):a("utils.change-username-card.form.submit-button")})})]})]})})})})},Z=()=>u(N,{spacing:2,columns:{xs:1,md:2,xl:3},children:[e(R,{}),e(Y,{}),e(H,{})]}),te=()=>(K("utils"),e(Z,{}));export{te as default};
