import{bX as T,r as S,i as O,a3 as D,ak as L,k as v,j as t,a2 as j,o as l,ai as h,bs as x,bY as C,bt as I,bu as _,bd as $,bZ as z,bi as M,b_ as E,T as b,l as F,F as V,B as N,bJ as m,aa as K}from"./vendor-894d6afa.js";import{c as Q}from"./constate.es-202c99c0.js";import{P as g}from"./plan-357bf2a6.js";import{p as A,g as q,a as G,b as H}from"./plan-68b71785.js";import{m as k,o as J,M as f,S as U,p as X,b as Y}from"./index-33033ac6.js";import{E as Z}from"./index.es-8e82e15c.js";import{M as W}from"./Masonry-a910b117.js";const ee=()=>{const[e,{add:r,remove:o,reset:s}]=T([g.PERIOD,g.TRAFFIC]),[a,{add:i,remove:d,reset:n}]=T(A),[p,P]=S.useState(""),y=O();D(y.breakpoints.down("md"));const[c,{set:R,toggle:B}]=L(!1);return{planType:e,addPlanType:r,removePlanType:o,resetPlanType:s,togglePlanType:u=>{e.has(u)?o(u):r(u)},keyword:p,setKeyword:P,drawerOpen:c,setDrawerOpen:R,toggleDrawer:B,paymentAllow:a,addPayment:i,removePayment:d,resetPayment:n,togglePayment:u=>{a.has(u)?d(u):i(u)}}},[te,w]=Q(ee),ne=k()((e,{container:r,open:o})=>({drawer:{height:"100%",width:280,[e.breakpoints.only("lg")]:{width:r?240:void 0},flexShrink:0,zIndex:1100,[e.breakpoints.up("lg")]:{zIndex:0},marginRight:o?e.spacing(2.5):0,[e.breakpoints.down("sm")]:{marginRight:e.spacing(2.5),width:240},[e.breakpoints.up("sm")]:{position:"sticky",zIndex:0}},drawerPaper:{height:"auto",width:280,[e.breakpoints.down("sm")]:{height:"100%",width:240},[e.breakpoints.only("lg")]:{width:r?240:void 0},boxSizing:"border-box",position:"relative",boxShadow:"none"},card:{height:"100%"}})),re=()=>{const{t:e}=v(),r=O(),o=D(r.breakpoints.down("sm")),{container:s}=J(),{drawerOpen:a,setDrawerOpen:i,planType:d,togglePlanType:n,togglePayment:p,paymentAllow:P}=w(),{classes:y}=ne({container:s,open:a});return t(j,{className:y.drawer,classes:{paper:y.drawerPaper},variant:o?"temporary":"persistent",anchor:"left",open:a,ModalProps:{keepMounted:!0},onClose:()=>i(!1),children:t(f,{title:e("subscription.buy.filter-card.title"),className:y.card,children:t(U,{children:l(h,{direction:"column",spacing:{xs:2,sm:2.5,md:3},children:[l(x,{component:"fieldset",children:[t(C,{component:"legend",sx:{mb:1},focused:!1,children:e("subscription.buy.filter-card.plan-type.title")}),[g.PERIOD,g.TRAFFIC].map(c=>t(I,{value:"end",control:t(_,{checked:d.has(c),onClick:()=>n(c)}),label:e(`subscription.buy.filter-card.plan-type.${c}`).toString(),labelPlacement:"end",sx:{ml:1}},c))]}),l(x,{component:"fieldset",children:[t(C,{component:"legend",sx:{mb:1},focused:!1,children:e("subscription.buy.filter-card.payment-type.title")}),A.map(c=>t(I,{value:"end",control:t(_,{checked:P.has(c),onClick:()=>p(c)}),label:e(`subscription.buy.filter-card.payment-type.${c}`).toString(),labelPlacement:"end",sx:{ml:1}},c))]})]})})})})},ae=k()(e=>({root:{width:"100%",padding:e.spacing(1)},filterButton:{}})),oe=()=>{const{t:e}=v(),{toggleDrawer:r,keyword:o,setKeyword:s}=w(),{classes:a}=ae();return t(f,{className:a.root,content:!1,children:l(h,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[t(h,{direction:"row",alignItems:"center",children:t(x,{variant:"standard",children:t($,{placeholder:e("subscription.buy.products-header.search").toString(),startAdornment:t(z,{}),value:o,onChange:i=>{s(i.target.value)}})})}),t(h,{direction:"row",alignItems:"center",children:t(M,{className:a.filterButton,color:"secondary",onClick:r,startIcon:t(E,{style:{color:"secondary.200"}}),children:t(b,{variant:"h6",color:"textPrimary",children:e("subscription.buy.products-header.filter-button").toString()})})})]})})},se=()=>l(f,{title:t(m,{variant:"text",width:200}),children:[t(m,{variant:"rectangular",width:"100%",height:100}),t(m,{variant:"text",width:200}),t(m,{variant:"text",width:160}),t(m,{variant:"text",width:160}),t(m,{variant:"text",width:200})]}),ie=({product:e})=>{const{t:r}=v(),o=K(),s=S.useMemo(()=>{const a=G(e);if(!a)return{price:0,mode:"null"};const i=r("subscription.buy.product-card.price-mode",{context:a}).toString();return{price:H(e,a),mode:i}},[]);return t(f,{title:e.name,secondary:t(b,{variant:"caption",color:"textSecondary",children:r("subscription.buy.product-card.price-mode",{context:s.mode,defaultValue:s.mode}).toString()}),children:l(h,{direction:"column",spacing:2,children:[t(b,{variant:"h3",component:"h2",color:"textPrimary",children:(s.price/100).toLocaleString("vi-VN",{style:"currency",currency:"VND"})}),t(Z,{children:e.content}),t(M,{variant:"contained",color:"primary",href:`/plan/buy/${e.id}`,onClick:a=>{a.preventDefault(),o(`/plan/buy/${e.id}`)},children:r("subscription.buy.product-card.buy-button").toString()})]})})},ce=()=>{const{drawerOpen:e,keyword:r,planType:o,paymentAllow:s}=w(),{data:a,isLoading:i}=X(),d=S.useMemo(()=>(a==null?void 0:a.filter(n=>n.show===1).filter(n=>n.name.includes(r)||n.content.includes(r)).filter(n=>!!(o.has(g.PERIOD)&&F.isNumber(n.one_day_price||n.month_price||n.two_month_price||n.year_price||n.quarter_price||n.half_year_price||n.two_year_price||n.three_year_price)||o.has(g.TRAFFIC)&&F.isNumber(n.onetime_price))).filter(n=>new Set(Array.from(Object.keys(q(n))).filter(p=>s.has(p))).size>0))||[],[a,r,o,s]);return l(V,{children:[i||d.length!==0&&l(W,{spacing:2,columns:{xs:1,sm:e?1:2,md:e?2:3,lg:e?3:4},children:[i&&Array.from({length:6}).map((n,p)=>t(se,{},p)),d.map(n=>t(ie,{product:n},n.id))]}),!i&&d.length===0&&t(N,{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4,children:t(b,{component:"span",variant:"h4",color:"textSecondary",children:"No Product Found"})})]})},le=k()((e,{open:r})=>({root:{display:"flex",flexDirection:"row"},main:{width:"100%",[e.breakpoints.up("sm")]:{marginLeft:r?0:-280,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}})),de=()=>{const{drawerOpen:e}=w(),{classes:r}=le({open:e});return l(N,{className:r.root,children:[t(re,{}),l(h,{component:"main",spacing:2,className:r.main,children:[t(oe,{}),t(ce,{})]})]})},Pe=()=>(Y("buy-plan"),t(te,{children:t(de,{})}));export{Pe as default};
