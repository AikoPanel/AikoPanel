System.register(["./vendor-legacy-21e846b5.js","./AuthWrapper-legacy-e64f4946.js","./index-legacy-4d5357df.js","./AnimateButton-legacy-ef3d17cf.js"],(function(e,i){"use strict";var r,n,a,t,l,o,s,d,c,m,h,g,p,u,b,w,y,x,v,S,f,j,B,C,_,k,q,A,I,D,E,W,F;return{setters:[e=>{r=e.bb,n=e.bc,a=e.k,t=e.ab,l=e.j,o=e.F,s=e.bd,d=e.be,c=e.bf,m=e.a$,h=e.l,g=e.B,p=e.o,u=e.aL,b=e.aj,w=e.bg,y=e.ap,x=e.bh,v=e.bi,S=e.bj,f=e.bk,j=e.bl,B=e.T,C=e.aI,_=e.m,k=e.bm,q=e.aq},e=>{A=e.A},e=>{I=e.u,D=e.a,E=e.I,W=e.b},e=>{F=e.A}],execute:function(){const i=()=>{const[e,i]=r.useState(!1),{isLoggedIn:A}=I((e=>e.auth)),[W]=D(),L=n(),{t:z}=a("common",{keyPrefix:"login"}),[K,M]=r.useState(!1),V=()=>{M(!K)},P=e=>{e.preventDefault()},T=e=>{e.getModifierState("CapsLock")?i(!0):i(!1)},$=t();return l(o,{children:l(s,{initialValues:{email:"",password:"",submit:null},validationSchema:d().shape({email:c().email(z("email_invalid").toString()).max(255).required(z("email_required").toString()),password:c().max(255).required(z("password_required").toString())}),onSubmit:async(e,{setErrors:i,setStatus:r,setSubmitting:n})=>{try{n(!0),await W(e).unwrap().then((()=>{r({success:!0}),m.event("login",{category:"auth",label:"login",method:"email",success:!0,email:e.email}),$("/dashboard",{replace:!0})})).catch((n=>{r({success:!1}),i(h.isEmpty(n.errors)?{submit:n.message}:n.errors),m.event("login",{category:"auth",label:"login",method:"email",success:!1,error:n.message,email:e.email,values:e})})).finally((()=>{n(!1)}))}catch(a){L.current&&(r({success:!1}),i(h.isEmpty(a.errors)?{submit:a.message}:a.errors),n(!1))}},children:({errors:r,handleBlur:n,handleChange:a,handleSubmit:t,isSubmitting:o,touched:s,values:d})=>l(g,{component:"form",noValidate:!0,onSubmit:t,children:p(u,{container:!0,spacing:3,children:[l(u,{item:!0,xs:12,children:p(b,{spacing:1,children:[l(w,{htmlFor:"email-login",children:l(y,{children:"login.email"})}),l(x,{id:"email-login",type:"email",value:d.email,name:"email",onBlur:n,onChange:a,placeholder:z("email_placeholder").toString(),fullWidth:!0,error:Boolean(s.email&&r.email)}),s.email&&r.email&&l(v,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]})}),l(u,{item:!0,xs:12,children:p(b,{spacing:1,children:[l(w,{htmlFor:"password-login",children:l(y,{children:"login.password"})}),l(x,{fullWidth:!0,color:e?"warning":"primary",error:Boolean(s.password&&r.password),id:"-password-login",type:K?"text":"password",value:d.password,name:"password",onBlur:e=>{i(!1),n(e)},onKeyDown:T,onChange:a,endAdornment:l(S,{position:"end",children:l(E,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:P,edge:"end",color:"secondary",children:l(K?f:j,{})})}),placeholder:z("password_placeholder").toString()}),e&&l(B,{variant:"caption",sx:{color:"warning.main"},id:"warning-helper-text-password-login",children:l(y,{ns:"notice",children:"capslock_on"})}),s.password&&r.password&&l(v,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]})}),l(u,{item:!0,xs:12,sx:{mt:-1},children:p(b,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[l(g,{}),l(C,{variant:"h6",component:_,to:A?"/auth/forgot-password":"/forgot-password",color:"text.primary",children:z("forgot_password").toString()})]})}),r.submit&&l(u,{item:!0,xs:12,children:l(v,{error:!0,children:r.submit})}),l(u,{item:!0,xs:12,children:l(F,{children:l(k,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:o?l(q,{size:24}):l(y,{i18nKey:"login.submit",children:"Submit"})})})})]})})})})};e("default",(()=>(W("login"),l(A,{children:p(u,{container:!0,spacing:3,children:[l(u,{item:!0,xs:12,children:p(b,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[l(B,{variant:"h3",children:l(y,{children:"login.title"})}),l(B,{component:_,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:l(y,{children:"login.go-register"})})]})}),l(u,{item:!0,xs:12,children:l(i,{})})]})}))))}}}));
