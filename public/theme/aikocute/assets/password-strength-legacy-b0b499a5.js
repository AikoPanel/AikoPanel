System.register(["./vendor-legacy-a194f484.js","./index-legacy-3a6f8cc6.js"],(function(e,t){"use strict";var n,r,o,a,i,c,s,u,l,p,d,f,h,v,y,g,b,m,O,I,w;return{setters:[e=>{n=e.r,r=e.bv,o=e.ba,a=e.bw,i=e.bx,c=e.a9,s=e.k,u=e.j,l=e.bf,p=e.by,d=e.o,f=e.F,h=e.bz,v=e.bA,y=e.ao,g=e.bB,b=e.l,m=e.a_},e=>{O=e.f,I=e.e,w=e.I}],execute:function(){var t={};function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n),r=["placeholder","separator","isLastChild","ariaLabelOverride","shouldRender","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure","onSubmit"];function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var b=function(e){return"object"===g(e)},m=function(e){l(o,e);var n=d(o);function o(e){var r;return c(this,o),y(h(r=n.call(this,e)),"getClasses",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!b(e)&&!1!==e})).join(" ")})),y(h(r),"getType",(function(){var e=r.props,t=e.isInputSecure,n=e.isInputNum;return t?"password":n?"tel":"text"})),y(h(r),"getAriaLabel",(function(e,t){var n=r.props.ariaLabelOverride;return n||"".concat(0===e?"Please enter verification code. ":"").concat(t?"Digit":"Character"," ").concat(e+1)})),r.input=t.default.createRef(),r}return u(o,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focus,n=e.shouldAutoFocus,r=this.input.current;r&&t&&n&&r.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.focus,n=this.input.current;e.focus!==t&&n&&t&&(n.focus(),n.select())}},{key:"render",value:function(){var e=this.props,n=e.placeholder,o=e.separator,c=e.isLastChild;e.ariaLabelOverride;var s=e.shouldRender,u=e.inputStyle,l=e.focus,p=e.isDisabled,d=e.hasErrored,f=e.errorStyle,h=e.focusStyle,v=e.disabledStyle;e.shouldAutoFocus;var y=e.isInputNum,g=e.index,m=e.value,O=e.className;e.isInputSecure,e.onSubmit;var I=i(e,r);return t.default.createElement("div",{className:O,style:{display:"flex",alignItems:"center"}},t.default.createElement("input",a({"aria-label":this.getAriaLabel(g,y),style:Object.assign({width:"1em",textAlign:"center",padding:0},b(u)&&u,l&&b(h)&&h,p&&b(v)&&v,d&&b(f)&&f),placeholder:n,className:this.getClasses(u,l&&h,p&&v,d&&f),type:this.getType(),ref:this.input,disabled:p,value:m||""},I)),!c&&s&&o)}}]),o}(t.PureComponent),O=function(e){l(r,e);var n=d(r);function r(){var e;c(this,r);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return y(h(e=n.call.apply(n,[this].concat(i))),"state",{activeInput:0}),y(h(e),"getOtpValue",(function(){return e.props.value?e.props.value.toString().split(""):[]})),y(h(e),"getPlaceholderValue",(function(){var t=e.props,n=t.placeholder,r=t.numInputs;if("string"==typeof n){if(n.length===r)return n;n.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}})),y(h(e),"handleOtpChange",(function(t){(0,e.props.onChange)(t.join(""))})),y(h(e),"isInputValueValid",(function(t){return(e.props.isInputNum?!isNaN(parseInt(t,10)):"string"==typeof t)&&1===t.trim().length})),y(h(e),"focusInput",(function(t){var n=e.props.numInputs,r=Math.max(Math.min(n-1,t),0);e.setState({activeInput:r})})),y(h(e),"focusNextInput",(function(){var t=e.state.activeInput;e.focusInput(t+1)})),y(h(e),"focusPrevInput",(function(){var t=e.state.activeInput;e.focusInput(t-1)})),y(h(e),"changeCodeAtFocus",(function(t){var n=e.state.activeInput,r=e.getOtpValue();r[n]=t[0],e.handleOtpChange(r)})),y(h(e),"handleOnPaste",(function(t){t.preventDefault();var n=e.state.activeInput,r=e.props,o=r.numInputs;if(!r.isDisabled){for(var a=e.getOtpValue(),i=n,c=t.clipboardData.getData("text/plain"),s=(e.props.isInputNum?c.replace(/\D/g,""):c).slice(0,o-n).split(""),u=0;u<o;++u)u>=n&&s.length>0&&(a[u]=s.shift(),i++);e.setState({activeInput:i},(function(){e.focusInput(i),e.handleOtpChange(a)}))}})),y(h(e),"handleOnChange",(function(t){var n=t.target.value;e.isInputValueValid(n)&&e.changeCodeAtFocus(n)})),y(h(e),"focusPrevInputAndChangeCode",(function(t){var n=e.state.activeInput,r=e.getOtpValue();r[n]!=t[0]?(r[n]=t[0],r[n+1]!=t[0]&&e.focusInput(r.length-1)):e.focusInput(n-1),e.handleOtpChange(r)})),y(h(e),"handleOnKeyDown",(function(t){8===t.keyCode||"Backspace"===t.key?(t.preventDefault(),e.focusPrevInputAndChangeCode("")):46===t.keyCode||"Delete"===t.key?(t.preventDefault(),e.changeCodeAtFocus("")):37===t.keyCode||"ArrowLeft"===t.key?(t.preventDefault(),e.focusPrevInput()):39===t.keyCode||"ArrowRight"===t.key?(t.preventDefault(),e.focusNextInput()):32===t.keyCode||" "===t.key||"Spacebar"===t.key||"Space"===t.key?t.preventDefault():13!==t.keyCode&&"Enter"!==t.key||e.props.onSubmit()})),y(h(e),"handleOnInput",(function(t){var n=t.target.value;if(t.target.value)if(t.target.value&&t.target.value.length>1){t.preventDefault();for(var r=e.props.numInputs,o=e.state.activeInput,a=e.getOtpValue(),i=t.target.value.slice(0,r-o).split(""),c=0;c<r;++c)c>=o&&i.length>0&&(a[c]=i.shift());e.handleOtpChange(a),e.focusInput(e.props.numInputs)}else if(n&&n.trim().length>1)t.clipboardData={getData:function(){return n.trim()}},e.handleOnPaste(t);else if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var s=t.nativeEvent;null===s.data&&"deleteContentBackward"===s.inputType&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}})),y(h(e),"renderInputs",(function(){for(var n=e.state.activeInput,r=e.props,o=r.id,i=r.autoComplete,c=r.numInputs,s=r.inputStyle,u=r.focusStyle,l=r.separator,p=r.separateAfter,d=void 0===p?1:p,f=r.isDisabled,h=r.disabledStyle,v=r.hasErrored,y=r.errorStyle,g=r.shouldAutoFocus,b=r.isInputNum,O=r.isInputSecure,I=r.className,w=r.inputProps,S=r.onSubmit,C=[],_=e.getOtpValue(),x=e.getPlaceholderValue(),k=e.props["data-cy"],R=e.props["data-testid"],j=e.props["custom-test-attr"],E=e.props["custom-test-id"],L=function(r){var p=void 0;p=(r+1)%parseInt(d)==0;var L={};j&&(L[j]=E&&"".concat(E,"-").concat(r));var P={};w&&(Array.isArray(w)?w[r]&&(P=w[r]):P=w),C.push(t.default.createElement(m,a({id:o&&"".concat(o,"-").concat(r),autoComplete:null!=i?i:"off",placeholder:x&&x[r],key:r,index:r,focus:n===r,value:_&&_[r],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(t){e.setState({activeInput:r}),t.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:l,inputStyle:s,focusStyle:u,isLastChild:r===c-1,isDisabled:f,disabledStyle:h,hasErrored:v,errorStyle:y,shouldAutoFocus:g,isInputNum:b,isInputSecure:O,className:I,"data-cy":k&&"".concat(k,"-").concat(r),"data-testid":R&&"".concat(R,"-").concat(r),shouldRender:p,onSubmit:S},P,L)))},P=0;P<c;P++)L(P);return C})),e}return u(r,[{key:"componentDidUpdate",value:function(){var e=this.props.value,t=this.state.activeInput;""==e&&t>0&&this.setState({activeInput:0})}},{key:"render",value:function(){var e=this.props.containerStyle;return t.default.createElement("div",{style:Object.assign({display:"flex"},b(e)&&e),className:b(e)?"":e},this.renderInputs())}}]),r}(t.Component);y(O,"defaultProps",{numInputs:4,onChange:function(e){return console.log(e)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1,onSubmit:function(e){return console.log(e)}});var I=O;e.default=I}(t),e("O",r(t));var _=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(C(t)),t.handleErrored=t.handleErrored.bind(C(t)),t.handleChange=t.handleChange.bind(C(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(C(t)),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},a.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},a.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},a.executeAsync=function(){var e=this;return new Promise((function(t,n){e.executionResolve=t,e.executionReject=n,e.execute()}))},a.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},a.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},a.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},a.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},a.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},a.componentDidMount=function(){this.explicitRender()},a.componentDidUpdate=function(){this.explicitRender()},a.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},a.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},a.handleRecaptchaRef=function(e){this.captcha=e},a.render=function(){var e=this.props;e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl;var t=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]);return o.createElement("div",S({},t,{ref:this.handleRecaptchaRef}))},r}(o.Component);function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}_.displayName="ReCAPTCHA",_.propTypes={sitekey:a.string.isRequired,onChange:a.func,grecaptcha:a.object,theme:a.oneOf(["dark","light"]),type:a.oneOf(["image","audio"]),tabindex:a.number,onExpired:a.func,onErrored:a.func,size:a.oneOf(["compact","normal","invisible"]),stoken:a.string,hl:a.string,badge:a.oneOf(["bottomright","bottomleft","inline"])},_.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var k={},R=0,j="onloadcallback";const E=(L=function(){return"https://"+(("undefined"!=typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+j+"&render=explicit"},P=(P={callbackName:j,globalName:"grecaptcha"})||{},function(e){var t=e.displayName||e.name||"Component",r=function(t){var r,o;function a(e,n){var r;return(r=t.call(this,e,n)||this).state={},r.__scriptURL="",r}o=t,(r=a).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o;var i=a.prototype;return i.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+R++),this.__scriptLoaderID},i.setupScriptURL=function(){return this.__scriptURL="function"==typeof L?L():L,this.__scriptURL},i.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},i.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=k[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[P.callbackName]},i.componentDidMount=function(){var e=this,t=this.setupScriptURL(),n=this.asyncScriptLoaderGetScriptLoaderID(),r=P,o=r.globalName,a=r.callbackName,i=r.scriptId;if(o&&void 0!==window[o]&&(k[t]={loaded:!0,observers:{}}),k[t]){var c=k[t];return c&&(c.loaded||c.errored)?void this.asyncScriptLoaderHandleLoad(c):void(c.observers[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var s={};s[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)},k[t]={loaded:!1,observers:s};var u=document.createElement("script");for(var l in u.src=t,u.async=!0,P.attributes)u.setAttribute(l,P.attributes[l]);i&&(u.id=i);var p=function(e){if(k[t]){var n=k[t].observers;for(var r in n)e(n[r])&&delete n[r]}};a&&"undefined"!=typeof window&&(window[a]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),u.onload=function(){var e=k[t];e&&(e.loaded=!0,p((function(t){return!a&&(t(e),!0)})))},u.onerror=function(){var e=k[t];e&&(e.errored=!0,p((function(t){return t(e),!0})))},document.body.appendChild(u)},i.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===P.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)t[n].src.indexOf(e)>-1&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=k[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===P.removeOnUnmount&&delete k[e])},i.render=function(){var t=P.globalName,r=this.props;r.asyncScriptOnLoad;var o=r.forwardedRef,a=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(r,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(a[t]=void 0!==window[t]?window[t]:void 0),a.ref=o,n.createElement(e,a)},a}(n.Component),o=n.forwardRef((function(e,t){return n.createElement(r,x({},e,{forwardedRef:t}))}));return o.displayName="AsyncScriptLoader("+t+")",o.propTypes={asyncScriptOnLoad:a.func},i(o,e)})(_);var L,P;const D=({email:e})=>{const{data:t}=I(),[n,{isLoading:r}]=O(),{enqueueSnackbar:a}=c(),{t:i}=s(),[S,C]=o.useState(!1);return d(f,{children:[u(l,{position:"end",children:u(w,{"aria-label":"send email code",onClick:()=>C(!0),edge:"end",color:"secondary",disabled:r,children:u(p,{})})}),d(h,{open:S,onClose:()=>C(!1),children:[u(v,{children:u(y,{i18nKey:"auth.captcha.title",children:"Captcha"})}),u(g,{children:u(E,{sitekey:t?.recaptcha_site_key,onChange:t=>{b.isNull(t)?a(i("auth.captcha.error_null_token"),{variant:"error"}):n({email:e,recaptcha_data:t}).unwrap().then((()=>{a(i("auth.captcha.success"),{variant:"success"}),m.event("send_email_verify",{category:"auth",label:"send_email_verify",email:e,success:!0})})).catch((t=>{console.error(t),a(i("auth.captcha.error"),{variant:"error"}),m.event("send_email_verify",{category:"auth",label:"send_email_verify",email:e,success:!1,error:t})})).finally((()=>{C(!1)}))}})})]})]})};e("S",(({email:e})=>{const[t,{isLoading:n}]=O(),{data:r}=I(),{enqueueSnackbar:o}=c(),{t:a}=s(),i=()=>{console.log("send email code"),t({email:e}).unwrap().then((()=>{o(a("auth.captcha.success"),{variant:"success"})})).catch((e=>{console.error(e),o(a("auth.captcha.error"),{variant:"error"})}))};return 1===r?.is_recaptcha?u(D,{email:e}):u(l,{position:"end",children:u(w,{"aria-label":"send email code",onClick:i,edge:"end",color:"secondary",disabled:n,children:u(p,{})})})})),e("a",(e=>e<2?{label:"Poor",color:"error.main"}:e<3?{label:"Weak",color:"warning.main"}:e<4?{label:"Normal",color:"warning.dark"}:e<5?{label:"Good",color:"success.main"}:e<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"})),e("s",(e=>{let t=0;return e.length>5&&(t+=1),e.length>7&&(t+=1),(e=>new RegExp(/[0-9]/).test(e))(e)&&(t+=1),(e=>new RegExp(/[!#@$%^&*)(+=._-]/).test(e))(e)&&(t+=1),(e=>new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e))(e)&&(t+=1),t}))}}}));
