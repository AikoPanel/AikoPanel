System.register(["./vendor-legacy-21e846b5.js","./KeyValueTable-legacy-e5a54083.js","./index-legacy-4d5357df.js"],(function(e,r){"use strict";var a,n,t,i,o,l,c,d,s,p,u,m,f,b,h,w,_,g,x,y,v,k,S,C,B,M,V,j,q,L,W,Y,T,D,K,E,H,N,O,P,R,z,J,$,F,I,Q,U,A;return{setters:[e=>{a=e.k,n=e.r,t=e.at,i=e.j,o=e.T,l=e.be,c=e.bf,d=e.bp,s=e.bd,p=e.B,u=e.o,m=e.aj,f=e.c8,b=e.bm,h=e.aq,w=e.aa,_=e.c7,g=e.bt,x=e.cc,y=e.cd,v=e.ap,k=e.aJ,S=e.ce,C=e.cf,B=e.cg,M=e.ch,V=e.ci,j=e.aI,q=e.al,L=e.F,W=e.bK,Y=e.bw,T=e.bx,D=e.by,K=e.c3,E=e.c4,H=e.bT},e=>{N=e.K},e=>{O=e.j,P=e.M,R=e.J,z=e.P,J=e.Q,$=e.R,F=e.T,I=e.E,Q=e.i,U=e.U,A=e.b}],execute:function(){const r=()=>{const{t:e}=a(),{data:r,isLoading:l}=O(),c=n.useMemo((()=>[{key:e("profile.account-info-card.table.email",{context:"key"}),value:e("profile.account-info-card.table.email",{context:"value",email:r?.email})},{key:e("profile.account-info-card.table.sni",{context:"key"}),value:e("profile.account-info-card.table.sni",{context:"value",sni:r?.sni})},{key:e("profile.account-info-card.table.plan_expired_at",{context:"key"}),value:e("profile.account-info-card.table.plan_expired_at",{context:"value",date:t.unix(r?.expired_at??0).format("DD-MM-YYYY HH:mm")})},{key:e("profile.account-info-card.table.created_at",{context:"key"}),value:e("profile.account-info-card.table.created_at",{context:"value",date:t.unix(r?.created_at??0).format("DD-MM-YYYY HH:mm")})}].map((e=>({key:i(o,{noWrap:!0,children:e.key}),value:i(o,{noWrap:!0,children:e.value})})))),[r,e]);return i(P,{title:e("profile.account-info-card.title"),children:i(N,{data:c,isValueLoading:l})})},G=()=>{const{t:e}=a(),{data:r,isLoading:t}=O(),l=n.useMemo((()=>[{key:e("profile.wallet-card.table.balance",{context:"key"}),value:e("profile.wallet-card.table.balance",{context:"value",value:((r?.balance??0)/100).toLocaleString("vi-VN",{style:"currency",currency:"VND"}),count:(r?.balance??0)/100})},{key:e("profile.wallet-card.table.commission_balance",{context:"key"}),value:e("profile.wallet-card.table.commission_balance",{context:"value",value:((r?.commission_balance??0)/100).toLocaleString("vi-VN",{style:"currency",currency:"VND"}),count:(r?.commission_balance??0)/100})}].map((e=>({key:i(o,{noWrap:!0,children:e.key}),value:i(o,{noWrap:!0,children:e.value})})))),[r,e]);return i(P,{title:e("profile.wallet-card.title"),children:i(N,{data:l,isValueLoading:t})})},X={old_password:"",new_password:"",confirm_password:"",submit:null},Z=()=>{const{t:e}=a(),r=R(),[t]=z(),w=n.useMemo((()=>l({old_password:c().required(e("profile.change-password-card.form.old_password",{context:"required"}).toString()),new_password:c().required(e("profile.change-password-card.form.new_password",{context:"required"}).toString()).min(8,e("profile.change-password-card.form.new_password",{context:"min",count:8}).toString()),confirm_password:c().required(e("profile.change-password-card.form.confirm_password",{context:"required"}).toString()).oneOf([d("new_password")],e("profile.change-password-card.form.confirm_password",{context:"not_match"}).toString())})),[e]),_=n.useCallback((async(e,{setSubmitting:a,setStatus:n,setErrors:i})=>{try{await t(e).unwrap(),n({success:!0}),r(J())}catch(o){const e=o;n({success:!1,message:e.message}),i(e.errors||{submit:e.message})}finally{a(!1)}}),[t,r]);return i(P,{title:e("profile.change-password-card.title"),children:i(s,{initialValues:X,validationSchema:w,onSubmit:_,children:({handleChange:r,handleBlur:a,handleSubmit:n,errors:t,touched:l,isSubmitting:c,values:d})=>i(p,{component:"form",onSubmit:n,children:u(m,{spacing:2,children:[i(f,{type:"password",id:"old_password-label",name:"old_password",label:e("profile.change-password-card.form.old_password",{context:"label"}),value:d.old_password,onChange:r,onBlur:a,error:Boolean(l.old_password&&t.old_password),helperText:l.old_password&&t.old_password,disabled:c,fullWidth:!0}),i(f,{type:"password",id:"new_password-label",name:"new_password",label:e("profile.change-password-card.form.new_password",{context:"label"}),value:d.new_password,onChange:r,onBlur:a,error:Boolean(l.new_password&&t.new_password),helperText:l.new_password&&t.new_password,disabled:c,autoComplete:"new-password",fullWidth:!0}),i(f,{type:"password",id:"confirm_password-label",name:"confirm_password",label:e("profile.change-password-card.form.confirm_password",{context:"label"}),value:d.confirm_password,onChange:r,onBlur:a,error:Boolean(l.confirm_password&&t.confirm_password),helperText:l.confirm_password&&t.confirm_password,disabled:c,autoComplete:"new-password",fullWidth:!0}),u(m,{direction:"row",justifyContent:"space-between",children:[i(p,{children:i(o,{variant:"caption",color:"error",noWrap:!0,children:t.submit})}),i(m,{direction:"row",justifyContent:"flex-end",spacing:2,children:i(b,{type:"submit",variant:"contained",disabled:c,children:c?i(h,{size:16}):e("profile.change-password-card.form.submit-button")})})]})]})})})})},ee=()=>{const{t:e}=a(),{data:r,isLoading:t}=O(),[o]=$(),{enqueueSnackbar:l}=w(),c=n.useMemo((()=>({remind_expire:1===r?.remind_expire,remind_traffic:1===r?.remind_traffic})),[r]),d=n.useCallback((async(r,{setSubmitting:a,setStatus:n,setErrors:t})=>{try{await o({remind_expire:r.remind_expire?1:0,remind_traffic:r.remind_traffic?1:0}).unwrap(),n({success:!0}),l(e("notice::success.update"),{variant:"success"})}catch(i){n({success:!1}),t(i.errors||{submit:i.message})}finally{a(!1)}}),[l,e]);return i(P,{title:e("profile.notification-card.title"),children:i(s,{initialValues:c,onSubmit:d,enableReinitialize:!0,children:({values:r,handleChange:a,handleSubmit:n,handleBlur:o,isSubmitting:l})=>i(p,{component:_,onSubmit:n,children:u(m,{spacing:2,children:[i(g,{control:i(x,{}),name:"remind_expire",checked:r.remind_expire,disabled:t||l,onChange:a,onBlur:o,label:e("profile.notification-card.expired_notify",{context:"label"}),labelPlacement:"end",sx:{m:0}}),i(g,{control:i(x,{}),name:"remind_traffic",checked:r.remind_traffic,disabled:t||l,onChange:a,onBlur:o,label:e("profile.notification-card.traffic_notify",{context:"label"}),labelPlacement:"end",sx:{m:0}}),i(m,{direction:"row",justifyContent:"flex-end",children:i(y,{variant:"contained",type:"submit",loading:t||l,children:e("profile.notification-card.save-button")})})]})})})})},re=()=>{const{t:e}=a(),{data:r}=F(),{data:t}=I(),{data:l}=Q(),c=n.useMemo((()=>v),[e]),[d,s]=k("telegram_card_init",{defaultValue:0}),[f,{inc:h,dec:w}]=S(d,{min:0,max:2});if(n.useEffect((()=>{s(f)}),[f]),!t?.is_telegram)return null;const _=n.useMemo((()=>()=>u(m,{direction:"row",spacing:1,mt:2,children:[i(b,{onClick:()=>h(),variant:"contained",disabled:f>=2,children:e("profile.telegram-card.next_step")}),i(b,{onClick:()=>w(),variant:"text",disabled:f<=0,children:e("profile.telegram-card.previous_step")})]})),[e,f]);return i(P,{title:e("profile.telegram-card.title"),children:u(C,{activeStep:f,orientation:"vertical",children:[u(B,{children:[i(M,{children:i(o,{variant:"subtitle1",children:e("profile.telegram-card.add_bot",{context:"label"})})}),u(V,{children:[i(p,{children:i(c,{i18nKey:"profile.telegram-card.add_bot",tOptions:{context:"content",name:r?.username},children:i(j,{href:`https://t.me/${r?.username}`,target:"_blank"})})}),i(_,{})]})]}),u(B,{children:[i(M,{children:i(o,{variant:"subtitle1",children:e("profile.telegram-card.send_command",{context:"label"})})}),u(V,{children:[i(p,{children:i(c,{i18nKey:"profile.telegram-card.send_command",tOptions:{context:"content"},children:{command:`/bind ${l?.subscribe_url}`}})}),i(_,{})]})]}),u(B,{children:[i(M,{children:i(o,{variant:"subtitle1",children:e("profile.telegram-card.add_to_group",{context:"label"})})}),u(V,{children:[i(p,{children:i(o,{children:i(c,{i18nKey:"profile.telegram-card.add_to_group",tOptions:{link:t?.telegram_discuss_link,context:"content"},children:i(j,{href:t?.telegram_discuss_link,target:"_blank",rel:"noreferrer"})})})}),i(_,{})]})]})]})})},ae=()=>{const{t:e}=a(),[r,{setLeft:t,setRight:o}]=q(!1),{enqueueSnackbar:l}=w(),[c,{isLoading:d}]=U(),s=n.useCallback((async()=>{try{await c().unwrap(),l(e("notice::reset-security",{context:"success"}),{variant:"success"})}catch(r){l(e("notice::reset-security",{context:"failed"}),{variant:"error"})}finally{t()}}),[c,l,e,t]);return u(L,{children:[i(P,{title:e("profile.reset-subscription-card.title"),children:u(m,{spacing:2,children:[i(W,{severity:"warning",children:e("profile.reset-subscription-card.alert")}),i(b,{variant:"contained",color:"error",fullWidth:!0,onClick:o,children:e("profile.reset-subscription-card.button")})]})}),u(Y,{open:r,onClose:t,"aria-labelledby":"form-dialog-title",children:[i(T,{id:"form-dialog-title",children:e("profile.reset-subscription-card.dialog.title")}),i(D,{children:i(K,{children:e("profile.reset-subscription-card.dialog.content")})}),u(E,{children:[i(b,{onClick:t,color:"primary",children:e("profile.reset-subscription-card.dialog.cancel")}),i(y,{onClick:s,color:"error",loading:d,children:e("profile.reset-subscription-card.dialog.confirm")})]})]})]})},ne=()=>u(H,{spacing:2,columns:{xs:1,md:2,xl:3},children:[i(r,{}),i(G,{}),i(Z,{}),i(ee,{}),i(re,{}),i(ae,{})]});e("default",(()=>(A("profile"),i(ne,{}))))}}}));
