import{j as r,k as S,aa as x,bb as v,r as f,aI as w,m as s,at as l,ax as d,ak as c,bk as y,bW as N}from"./vendor-4c8effbd.js";import{M as _,t as D,v as C,m as I,b as k}from"./index-efdad191.js";import{D as E}from"./DataGrid-345901e9.js";import{O as a}from"./order-f9773b97.js";const L=({children:t,className:o})=>r(_,{className:o,content:!1,children:t}),O=()=>{const{t}=S(),{data:o,isLoading:u}=D(void 0,{pollingInterval:1e3*60}),[g,{isLoading:p}]=C(),{enqueueSnackbar:i}=x(),[m,h]=v.useState(10),b=f.useMemo(()=>[{field:"trade_no",headerName:t("order.list.table.trade_no",{context:"header"}).toString(),description:t("order.list.table.trade_no",{context:"description"}).toString(),width:240,type:"string",renderCell:e=>r(w,{component:s,to:`/order/${e.value}`,underline:"none",children:e.value}),sortComparator:(e,n)=>parseInt(e)-parseInt(n)},{field:"plan.name",headerName:t("order.list.table.plan_name",{context:"header"}).toString(),description:t("order.list.table.plan_name",{context:"description"}).toString(),width:180,type:"string",valueGetter:e=>e.row.plan.name},{field:"total_amount",headerName:t("order.list.table.total_amount",{context:"header"}).toString(),description:t("order.list.table.total_amount",{context:"description"}).toString(),width:180,type:"number",valueGetter:e=>e.row.total_amount/100,valueFormatter:e=>`${e.value.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`},{field:"period",sortable:!1,headerName:t("order.list.table.period",{context:"header"}).toString(),description:t("order.list.table.period",{context:"description"}).toString(),width:120,type:"string",valueFormatter:e=>t("order.list.table.period-value",{context:e.value}).toString()},{field:"status",headerName:t("order.list.table.status",{context:"header"}).toString(),description:t("order.list.table.status",{context:"description"}).toString(),width:120,type:"string",sortable:!1,valueFormatter:e=>{switch(e.value){case a.PENDING:return t("order.list.table.status-value",{context:"pending"}).toString();case a.PAID:return t("order.list.table.status-value",{context:"paid"}).toString();case a.CANCELLED:return t("order.list.table.status-value",{context:"cancelled"}).toString();case a.FINISHED:return t("order.list.table.status-value",{context:"finished"}).toString();case a.DEDUCTED:return t("order.list.table.status-value",{context:"deducted"}).toString();default:return e.value}}},{field:"created_at",headerName:t("order.list.table.created_at",{context:"header"}).toString(),description:t("order.list.table.created_at",{context:"description"}).toString(),width:180,type:"dateTime",valueGetter:e=>l.unix(e.row.created_at).toDate(),valueFormatter:e=>l(e.value).format("DD-MM-YYYY HH:mm:ss")},{field:"actions",headerName:t("order.list.table.action",{context:"header"}).toString(),width:120,sortable:!1,type:"actions",getActions:e=>[r(d,{title:t("order.list.table.action-view",{context:"tooltip"}).toString(),children:r(c,{size:"small",component:s,to:`/order/${e.row.trade_no}`,children:r(y,{})})},e.id),...e.row.status===a.PENDING?[r(d,{title:t("order.list.table.action-cancel",{context:"tooltip"}).toString(),children:r(c,{size:"small",onClick:()=>{g(e.row.trade_no).unwrap().then(()=>{i(t("notice::order-cancel",{context:"success"}).toString(),{variant:"success"})}).catch(n=>{console.error("error cancelling order",n),i(t("notice::order-cancel",{context:"fail"}).toString(),{variant:"error"})})},disabled:p,children:r(N,{})})},e.id)]:[]]}],[o,t]);return r(E,{columns:b,rows:o!=null?o:[],loading:u,getRowId:e=>e.trade_no,rowsPerPageOptions:[5,10,25,50],pageSize:m,onPageSizeChange:e=>h(e)})},G=I()(t=>({root:{flexGrow:1,height:"100%",display:"flex",flexDirection:"column"}})),P=()=>{const{classes:t}=G();return r(L,{className:t.root,children:r(O,{})})},Y=()=>(k("order-list"),r(P,{}));export{Y as default};
