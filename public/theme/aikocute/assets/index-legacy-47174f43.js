System.register(["./vendor-legacy-21e846b5.js","./index-legacy-4d5357df.js"],(function(e,a){"use strict";var n,t,i,s,r,c,l,u,o,d,m,h,b,g,v,S,f,p,y,x,C,w,q,B,j,k,W;return{setters:[e=>{n=e.aa,t=e.k,i=e.r,s=e.be,r=e.bf,c=e.j,l=e.bd,u=e.B,o=e.o,d=e.aj,m=e.c8,h=e.T,b=e.bm,g=e.aq,v=e.bs,S=e.bg,f=e.c9,p=e.ca,y=e.bT},e=>{x=e.J,C=e.K,w=e.M,q=e.N,B=e.E,j=e.j,k=e.O,W=e.b}],execute:function(){const a={avatar:"",submit:null},T=()=>{const{enqueueSnackbar:e}=n(),{t:v}=t(),S=x(),[f]=C(),p=i.useMemo((()=>s({avatar:r().url(v("utils.change-avatar-card.form.url",{context:"invalid"}).toString()).required(v("utils.change-avatar-card.form.avatar",{context:"required"}).toString())})),[v]),y=i.useCallback((async(a,{setSubmitting:n,setStatus:t,setErrors:i})=>{try{await f(a).unwrap(),t({success:!0}),e(v("notice::update-user_success"),{variant:"success"})}catch(s){const e=s;t({success:!1,message:e.message}),i(e.errors||{submit:e.message})}finally{n(!1)}}),[f,S,e,v]);return c(w,{title:v("utils.change-avatar-card.title"),children:c(l,{initialValues:a,validationSchema:p,onSubmit:y,children:({handleChange:e,handleBlur:a,handleSubmit:n,errors:t,touched:i,isSubmitting:s,values:r})=>c(u,{component:"form",onSubmit:n,children:o(d,{spacing:2,children:[c(m,{type:"avatar",id:"avatar-label",name:"avatar",label:v("utils.change-avatar-card.form.avatar",{context:"label"}),value:r.avatar,onChange:e,onBlur:a,error:Boolean(i.avatar&&t.avatar),helperText:i.avatar&&t.avatar,disabled:s,fullWidth:!0}),o(d,{direction:"row",justifyContent:"space-between",children:[c(u,{children:c(h,{variant:"caption",color:"error",noWrap:!0,children:t.submit})}),c(d,{direction:"row",justifyContent:"flex-end",spacing:2,children:c(b,{type:"submit",variant:"contained",disabled:s,children:s?c(g,{size:16}):v("utils.change-avatar-card.form.submit-button")})})]})]})})})})},V=()=>{const{enqueueSnackbar:e}=n(),{t:a}=t(),[y]=q(),{data:x,isLoading:C}=B(),{data:k}=j(),[W,T]=i.useState(!1),V=i.useMemo((()=>s({sni:r().required(a("utils.change-sni-card.form.sni",{context:"required"}).toString()),customSni:r().when("sni",{is:e=>"other"===e,then:r().required(a("utils.change-sni-card.form.sni.custom",{context:"required"}).toString())})})),[a]),E=i.useCallback((async(n,{setSubmitting:t,setStatus:i,setErrors:s})=>{const r={...n,sni:"other"===n.sni?n.customSni:n.sni};try{await y(r).unwrap(),i({success:!0}),e(a("notice::update-user_success"),{variant:"success"})}catch(c){const e=c;i({success:!1,message:e.message}),s(e.errors||{submit:e.message})}finally{t(!1)}}),[y,e,a]);return C?c(g,{}):o(w,{title:a("utils.change-sni-card.title"),children:[k&&c(h,{variant:"body1",children:a("utils.change-sni-card.current-sni",{sni:k.sni})}),c(l,{initialValues:{sni:"",customSni:"",submit:null},validationSchema:V,onSubmit:E,children:({setFieldValue:e,handleChange:n,handleBlur:t,handleSubmit:i,errors:s,touched:r,isSubmitting:l,values:h})=>c(u,{component:"form",onSubmit:i,noValidate:!0,children:o(d,{spacing:2,children:[o(v,{fullWidth:!0,children:[c(S,{id:"sni-select-label",children:a("utils.change-sni-card.form.sni.label")}),o(f,{labelId:"sni-select-label",id:"sni-select",name:"sni",value:h.sni,onChange:a=>{const n="other"===a.target.value;T(n),e("sni",a.target.value)},onBlur:t,error:Boolean(r.sni&&s.sni),disabled:l,children:[x?.sni.map((e=>c(p,{value:e.value,children:e.lable},e.value))),c(p,{value:"other",children:a("utils.change-sni-card.form.sni.other")})]})]}),W&&c(m,{id:"customSni",name:"customSni",label:a("utils.change-sni-card.form.sni.custom"),value:h.customSni,onChange:n,onBlur:t,error:Boolean(r.customSni&&s.customSni),helperText:r.customSni&&s.customSni,disabled:l,fullWidth:!0}),c(d,{direction:"row",justifyContent:"flex-end",spacing:2,children:c(b,{type:"submit",variant:"contained",disabled:l,children:l?c(g,{size:24}):a("utils.change-sni-card.form.submit-button")})})]})})})]})},E={username:"",submit:null},M=()=>{const{enqueueSnackbar:e}=n(),{t:a}=t(),v=x(),[S]=k(),f=i.useMemo((()=>s({username:r().required(a("utils.change-username-card.form.username",{context:"required"}).toString())})),[a]),p=i.useCallback((async(n,{setSubmitting:t,setStatus:i,setErrors:s})=>{try{await S(n).unwrap(),i({success:!0}),e(a("notice::update-user_success"),{variant:"success"})}catch(r){const e=r;i({success:!1,message:e.message}),s(e.errors||{submit:e.message})}finally{t(!1)}}),[S,v,e,a]);return c(w,{title:a("utils.change-username-card.title"),children:c(l,{initialValues:E,validationSchema:f,onSubmit:p,children:({handleChange:e,handleBlur:n,handleSubmit:t,errors:i,touched:s,isSubmitting:r,values:l})=>c(u,{component:"form",onSubmit:t,children:o(d,{spacing:2,children:[c(m,{type:"username",id:"username-label",name:"username",label:a("utils.change-username-card.form.username",{context:"label"}),value:l.username,onChange:e,onBlur:n,error:Boolean(s.username&&i.username),helperText:s.username&&i.username,disabled:r,fullWidth:!0}),o(d,{direction:"row",justifyContent:"space-between",children:[c(u,{children:c(h,{variant:"caption",color:"error",noWrap:!0,children:i.submit})}),c(d,{direction:"row",justifyContent:"flex-end",spacing:2,children:c(b,{type:"submit",variant:"contained",disabled:r,children:r?c(g,{size:16}):a("utils.change-username-card.form.submit-button")})})]})]})})})})},z=()=>o(y,{spacing:2,columns:{xs:1,md:2,xl:3},children:[c(V,{}),c(M,{}),c(T,{})]});e("default",(()=>(W("utils"),c(z,{}))))}}}));
